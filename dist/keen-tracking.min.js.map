{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./node_modules/@regang/keen-core/lib/utils/each.js","webpack:///./node_modules/@regang/keen-core/lib/utils/extend.js","webpack:///(webpack)/buildin/global.js","webpack:///./lib/config-default.js","webpack:///./node_modules/promise-polyfill/src/polyfill.js","webpack:///./node_modules/promise-polyfill/src/finally.js","webpack:///./lib/index.js","webpack:///./node_modules/component-emitter/index.js","webpack:///./node_modules/whatwg-fetch/fetch.js","webpack:///./lib/utils/queue.js","webpack:///./lib/utils/optOut.js","webpack:///./lib/utils/localStorage.js","webpack:///./lib/extend-events.js","webpack:///./lib/utils/deepExtend.js","webpack:///./lib/utils/md5.js","webpack:///./lib/helpers/getScreenProfile.js","webpack:///./lib/helpers/getWindowProfile.js","webpack:///./lib/helpers/getDomNodePath.js","webpack:///./node_modules/promise-polyfill/src/index.js","webpack:///./lib/browser.js","webpack:///./node_modules/@regang/keen-core/lib/index.js","webpack:///./node_modules/@regang/keen-core/lib/utils/parse-params.js","webpack:///./node_modules/@regang/keen-core/lib/utils/serialize.js","webpack:///./lib/utils/listener.js","webpack:///./lib/record-events-browser.js","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/@regang/keen-core/lib/utils/base64.js","webpack:///./lib/utils/fetchRetry.js","webpack:///./lib/utils/unique.js","webpack:///./lib/utils/cache-browser.js","webpack:///./lib/defer-events.js","webpack:///./lib/browser-auto-tracking.js","webpack:///./lib/helpers/getBrowserProfile.js","webpack:///./lib/helpers/getDatetimeIndex.js","webpack:///./lib/helpers/getDomainName.js","webpack:///./lib/helpers/getDomNodeProfile.js","webpack:///./lib/helpers/getScrollState.js","webpack:///./lib/helpers/getUniqueId.js","webpack:///./lib/utils/cookie.js","webpack:///./node_modules/js-cookie/src/js.cookie.js","webpack:///./lib/utils/serializeForm.js","webpack:///./lib/utils/timer.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","cb","Array","length","target","arguments","prop","g","this","Function","e","configDefault","queue","capacity","interval","retry","limit","initialDelay","retryOnResponseStatuses","unique","cache","dbName","dbCollectionName","dbCollectionKey","maxAge","globalNS","self","global","Error","Promise","callback","constructor","then","resolve","reason","reject","KeenCore","helpers","observers","on","client","extensions","events","collections","config","respectDoNotTrack","doNotTrack","optOut","setOptOut","optedOut","recordDeferredEvents","writeKey","str","String","referrerPolicy","setGlobalProperties","props","log","version","pkg","Emitter","obj","mixin","addEventListener","event","fn","_callbacks","push","once","off","apply","removeListener","removeAllListeners","removeEventListener","callbacks","splice","emit","args","len","slice","listeners","hasListeners","fetch","support","Blob","viewClasses","isDataView","DataView","isPrototypeOf","isArrayBufferView","ArrayBuffer","isView","indexOf","toString","Headers","append","normalizeName","normalizeValue","oldValue","map","has","set","forEach","thisArg","keys","items","iteratorFor","values","entries","iterator","methods","Request","clone","body","_bodyInit","Body","Response","status","statusText","headers","url","error","response","type","redirectStatuses","redirect","RangeError","location","input","init","request","xhr","XMLHttpRequest","onload","rawHeaders","options","getAllResponseHeaders","replace","split","line","parts","shift","trim","join","responseURL","responseText","onerror","TypeError","ontimeout","open","method","credentials","withCredentials","responseType","setRequestHeader","send","polyfill","test","toLowerCase","next","done","undefined","isArray","header","getOwnPropertyNames","consumed","bodyUsed","fileReaderReady","reader","result","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","bufferClone","buf","view","Uint8Array","byteLength","buffer","_initBody","_bodyText","_bodyBlob","FormData","_bodyFormData","URLSearchParams","_bodyArrayBuffer","rejected","arrayBuffer","text","readAsText","chars","fromCharCode","readArrayBufferAsText","formData","decode","json","JSON","parse","upcased","toUpperCase","referrer","form","bytes","decodeURIComponent","bodyInit","ok","configQueue","timer","check","shouldFlushQueue","flush","pause","clearInterval","start","setInterval","isLocalStorageAvailable","localStorage","setItem","removeItem","lsTest","extendEvent","eventCollection","eventModifier","handleValidationError","extendEvents","eventsModifier","getExtendedEventBody","modifierResult","deepExtend","message","j","stringify","MD5","_","f","charCodeAt","charAt","M","V","h","md5_ii","md5_hh","md5_gg","md5_ff","safe_add","Y","X","md5_cmn","bit_rol","getScreenProfile","output","screen","orientation","innerWidth","innerHeight","getWindowProfile","html","document","documentElement","offsetHeight","offsetWidth","Math","max","scrollHeight","clientHeight","ratio","availHeight","parseFloat","toFixed","availWidth","getDomNodePath","el","nodeName","stack","parentNode","sibCount","sibIndex","childNodes","sib","hasAttribute","id","unshift","setTimeoutFunc","setTimeout","x","Boolean","noop","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","onFulfilled","onRejected","ret","newValue","finale","_unhandledRejectionFn","Handler","ex","prom","all","arr","remaining","res","val","race","setImmediate","err","console","warn","recordEvent","recordEvents","deferEvent","deferEvents","queueCapacity","queueInterval","initAutoTracking","initAutoTrackingCore","getBrowserProfile","getDatetimeIndex","getDomainName","getDomNodeProfile","getScrollState","getUniqueId","listener","listenerCore","utils","cookie","serializeForm","listenTo","listenerHash","eventType","selector","keenGlobals","webpackKeenGlobals","getItem","navigator","Keen","extendLibrary","KeenTracking","previousKeen","env","each","extend","parseParams","serialize","Client","configure","debug","isDefined","resources","legacyVersion","enabled","loaded","source","previous","noConflict","ready","projectId","host","protocol","requestType","userAgent","masterKey","path","baseUrl","base","arg","readyState","DOMContentLoaded","testDom","domReady","match","urlParams","pl","search","query","exec","data","encodeURIComponent","ctx","eventHandler","evt","srcElement","domListeners","handlers","elem","nodeList","querySelectorAll","matches","anchor","targetAttr","cbResponse","getAttribute","defaultPrevented","returnValue","preventDefault","metaKey","href","sendBeacon","catch","deferClickEvent","submit","deferFormSubmit","addListener","survivors","handler","hash","attachEvent","eventCollectionOrConfigObject","eventBody","configObject","collection","event_collection","checkValidation","extendedEventsHash","isUniqueResult","created","eventsHash","eventList","index","extendedEventBody","getRequestUrl","api_key","base64","encode","modified","Date","getTime","appVersion","getUrlMaxLength","sendFetch","connectionError","responseJSON","error_code","checkEventsSavedSuccessfuly","filter","success","img","createElement","naturalHeight","naturalWidth","width","height","src","Timeout","clearFn","_id","_clearFn","scope","clearTimeout","timeout","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","registerImmediate","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","getPrototypeOf","process","nextTick","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","port2","script","onreadystatechange","removeChild","appendChild","random","task","run","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","marker","runClearTimeout","Item","array","title","browser","argv","versions","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","i1","i2","i3","e1","e2","e3","e4","utf8","isNaN","c2","c3","cc","retriesLimit","retryInitialDelay","retryOn","retriesCount","wrappedFetch","uniqueIds","isUnique","customCacheConfig","configCache","stringifiedEvent","hashingMethod","expiryTime","now","alreadySentEvent","find","storage","getFromCache","saveToCache","indexedDBAvailable","cachingEnabled","db","cacheConfig","initializeIndexedDb","requestCacheConfig","dbConnectionRequest","indexedDB","onupgradeneeded","objectStore","createObjectStore","keyPath","createIndex","onsuccess","configOptions","requestSave","transaction","add","indexCleanUp","upperBoundOpenKeyRange","IDBKeyRange","upperBound","openCursor","cursor","delete","continue","responseFromCache","transactionDelete","num","Number","clonedQueueConfig","clonedQueueEvents","lib","ignoreDisabledFormFields","ignoreFormFieldTypes","recordClicks","recordClicksPositionPointer","recordFormSubmits","recordPageViews","recordPageViewsOnExit","recordScrollState","shareUuidAcrossDomains","collectIpAddress","collectUuid","recordElementViews","catchError","allTimeOnSiteS","allTimeOnSiteMS","hidden","visibilityChange","msHidden","webkitHidden","getSecondsSinceDate","getMiliSecondsSinceDate","domainName","hostname","cookieDomain","domain","uuid","initialReferrer","scrollState","addons","ua_string","date_time","ip","remove_ip_property","browserProfile","tracked_by","local_time_full","toISOString","user","page","description","scroll_state","time_on_page","time_on_page_ms","ip_address","geo","user_agent","tech","profile","full","info","initial","time","local","utc","keen","timestamp","element","pointer","x_position","pageX","y_position","pageY","serializerOptions","disabled","ignoreTypes","action","fields","IntersectionObserver","observer","isIntersecting","threshold","observe","date","round","cookieEnabled","appCodeName","getDocumentDescription","language","appName","onLine","platform","querySelector","content","getHours","parseInt","getDay","getDate","getMonth","getFullYear","extractHostname","splitArr","arrLen","class","className","getElementProps","event_key","node_name","offsetLeft","clientLeft","offsetTop","clientTop","state","pixel","pixel_max","ratio_max","pageYOffset","scrollTop","getScrollableArea","crypto","getRandomValues","expires","Cookies","getJSON","expire","daysUntilExpire","remove","attributes","converter","api","defaults","setMilliseconds","getMilliseconds","write","escape","toUTCString","secure","cookies","rdecode","read","withConverter","serializer","hash_serializer","str_serialize","elements","radio_store","k_r_success_contrls","k_r_submitter","checked","empty","selectOptions","isSelectedOptions","option","allowedEmpty","hasValue","selected","brackets","hash_assign","between","_values","string","children","RegExp","parse_keys","existing","count","clear"],"mappings":"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","file":"keen-tracking.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n","module.exports = each;\r\n\r\nfunction each(o, cb, s){\r\n  var n;\r\n  if (!o){\r\n    return 0;\r\n  }\r\n  s = !s ? o : s;\r\n  if (o instanceof Array){\r\n    // Indexed arrays, needed for Safari\r\n    for (n=0; n<o.length; n++) {\r\n      if (cb.call(s, o[n], n, o) === false){\r\n        return 0;\r\n      }\r\n    }\r\n  } else {\r\n    // Hashtables\r\n    for (n in o){\r\n      if (o.hasOwnProperty(n)) {\r\n        if (cb.call(s, o[n], n, o) === false){\r\n          return 0;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return 1;\r\n}\r\n","module.exports = extend;\r\n\r\nfunction extend(target){\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    for (var prop in arguments[i]){\r\n      target[prop] = arguments[i][prop];\r\n    }\r\n  }\r\n  return target;\r\n};\r\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","export const configDefault = {\r\n\r\n  // defer events - queue\r\n  // https://github.com/keen/keen-tracking.js/blob/master/docs/defer-events.md\r\n  queue: {\r\n    capacity: 5000,\r\n    interval: 15,\r\n  },\r\n\r\n  // connection problems - retry request\r\n  retry: {\r\n    limit: 10,\r\n    initialDelay: 200,\r\n    retryOnResponseStatuses: [\r\n      408,\r\n      500,\r\n      502,\r\n      503,\r\n      504\r\n    ]\r\n  },\r\n\r\n  unique: false, // record only unique events?\r\n  // if so - store unique events hashes to compare\r\n  cache: {\r\n    /*\r\n      storage: 'indexeddb', // uncomment for persistence\r\n    */\r\n    dbName: 'keenTracking', // indexedDB name\r\n    dbCollectionName: 'events',\r\n    dbCollectionKey: 'hash',\r\n\r\n    /*\r\n      hashingMethod: 'md5', // if undefined - store as stringified JSON\r\n    */\r\n    maxAge: 60 * 1000, // store for 1 minute\r\n  }\r\n}\r\n\r\nexport default configDefault;\r\n","import Promise from './index';\nimport promiseFinally from './finally';\n\n/** @suppress {undefinedVars} */\nvar globalNS = (function() {\n  // the only reliable means to get the global object is\n  // `Function('return this')()`\n  // However, this causes CSP violations in Chrome apps.\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('unable to locate global object');\n})();\n\nif (!('Promise' in globalNS)) {\n  globalNS['Promise'] = Promise;\n} else if (!globalNS.Promise.prototype['finally']) {\n  globalNS.Promise.prototype['finally'] = promiseFinally;\n}\n","/**\n * @this {Promise}\n */\nfunction finallyConstructor(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        // @ts-ignore\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nexport default finallyConstructor;\n","import KeenCore from '@regang/keen-core';\r\nimport each from '@regang/keen-core/lib/utils/each';\r\nimport extend from '@regang/keen-core/lib/utils/extend';\r\nimport { queue } from './utils/queue';\r\nimport { setOptOut } from './utils/optOut';\r\nimport pkg from '../package.json';\r\n\r\nKeenCore.helpers = KeenCore.helpers || {};\r\nKeenCore.prototype.observers = KeenCore.observers || {};\r\n\r\n// Install internal queue\r\nKeenCore.on('client', function(client){\r\n  client.extensions = {\r\n    events: [],\r\n    collections: {}\r\n  };\r\n\r\n  if (!client.config.respectDoNotTrack) {\r\n    this.doNotTrack = false;\r\n  }\r\n\r\n  if (typeof client.config.optOut !== 'undefined') {\r\n    setOptOut(client.config.optOut);\r\n    this.optedOut = client.config.optOut;\r\n  }\r\n\r\n  client.queue = queue(client.config.queue);\r\n  client.queue.on('flush', function(){\r\n    client.recordDeferredEvents();\r\n  });\r\n});\r\n\r\n// Accessors\r\nKeenCore.prototype.writeKey = function(str){\r\n  if (!arguments.length) return this.config.writeKey;\r\n  this.config.writeKey = (str ? String(str) : null);\r\n  return this;\r\n};\r\n\r\nKeenCore.prototype.referrerPolicy = function(str){\r\n  if (!arguments.length) return this.config.referrerPolicy;\r\n  this.config.referrerPolicy = (str ? String(str) : null);\r\n  return this;\r\n};\r\n\r\n// DEPRECATED\r\nKeenCore.prototype.setGlobalProperties = function(props){\r\n  KeenCore.log('This method has been removed. Check out #extendEvents: https://github.com/keen/keen-tracking.js#extend-events');\r\n  return this;\r\n};\r\n\r\nKeenCore.version = pkg.version;\r\n\r\nexport default KeenCore;\r\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status === undefined ? 200 : options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","import Emitter from 'component-emitter';\r\n\r\nimport configDefault from '../config-default.js';\r\n\r\nexport function queue(configQueue = {}) {\r\n  if (this instanceof queue === false) {\r\n    return new queue(configQueue);\r\n  }\r\n  this.capacity = 0;\r\n  this.config = {\r\n    ...configDefault.queue,\r\n    ...configQueue\r\n  };\r\n  this.events = {\r\n    // \"collection-1\": [],\r\n    // \"collection-2\": []\r\n  };\r\n  this.interval = 0;\r\n  this.timer = null;\r\n  return this;\r\n}\r\n\r\nEmitter(queue.prototype);\r\n\r\nqueue.prototype.check = function() {\r\n  if (shouldFlushQueue(this)) {\r\n    this.flush();\r\n  }\r\n  if (this.config.interval === 0 || this.capacity === 0) {\r\n    this.pause();\r\n  }\r\n  return this;\r\n};\r\n\r\nqueue.prototype.flush = function() {\r\n  this.emit('flush');\r\n  this.interval = 0;\r\n  return this;\r\n};\r\n\r\nqueue.prototype.pause = function() {\r\n  if (this.timer) {\r\n    clearInterval(this.timer);\r\n    this.timer = null;\r\n  }\r\n  return this;\r\n};\r\n\r\nqueue.prototype.start = function() {\r\n  var self = this;\r\n  self.pause();\r\n  self.timer = setInterval(function() {\r\n    self.interval++;\r\n    self.check();\r\n  }, 1000);\r\n  return self;\r\n};\r\n\r\nfunction shouldFlushQueue(props) {\r\n  if (props.capacity > 0 && props.interval >= props.config.interval) {\r\n    return true;\r\n  }\r\n  else if (props.capacity >= props.config.capacity) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n","import { isLocalStorageAvailable } from './localStorage';\r\n\r\nexport function setOptOut(optOut = true) {\r\n    if (!isLocalStorageAvailable) return;\r\n\r\n    if (optOut) {\r\n        localStorage.setItem('optout', optOut);\r\n        return;\r\n    }\r\n\r\n    localStorage.removeItem('optout');\r\n};\r\n","function lsTest(){\r\n  const test = 'test';\r\n  try {\r\n      localStorage.setItem(test, test);\r\n      localStorage.removeItem(test);\r\n      return true;\r\n  } catch(e) {\r\n      return false;\r\n  }\r\n}\r\n\r\nexport const isLocalStorageAvailable = lsTest();","import { deepExtend } from './utils/deepExtend';\r\nimport each from '@regang/keen-core/lib/utils/each';\r\n\r\nexport function extendEvent(eventCollection, eventModifier){\r\n  if (arguments.length !== 2 || typeof eventCollection !== 'string'\r\n    || ('object' !== typeof eventModifier && 'function' !== typeof eventModifier)) {\r\n      handleValidationError.call(this, 'Incorrect arguments provided to #extendEvent method');\r\n      return;\r\n  }\r\n  this.extensions.collections[eventCollection] = this.extensions.collections[eventCollection] || [];\r\n  this.extensions.collections[eventCollection].push(eventModifier);\r\n  this.emit('extendEvent', eventCollection, eventModifier);\r\n  return this;\r\n}\r\n\r\nexport function extendEvents(eventsModifier){\r\n  if (arguments.length !== 1 || ('object' !== typeof eventsModifier && 'function' !== typeof eventsModifier)) {\r\n    handleValidationError.call(this, 'Incorrect arguments provided to #extendEvents method');\r\n    return;\r\n  }\r\n  this.extensions.events.push(eventsModifier);\r\n  this.emit('extendEvents', eventsModifier);\r\n  return this;\r\n}\r\n\r\nfunction handleValidationError(message){\r\n  this.emit('error', `Event(s) not extended: ${message}`);\r\n}\r\n\r\nexport function getExtendedEventBody(result, queue){\r\n  if (queue && queue.length > 0) {\r\n    each(queue, function(eventModifier, i){\r\n      let modifierResult = (typeof eventModifier === 'function') ? eventModifier() : eventModifier;\r\n      deepExtend(result, modifierResult);\r\n    });\r\n  }\r\n  return result;\r\n}\r\n","export const deepExtend = function(target){\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    // Copy unique items from incoming array\r\n    if (target instanceof Array && arguments[i] instanceof Array) {\r\n      for (var j = 0; j < arguments[i].length; j++) {\r\n        if (target.indexOf(arguments[i][j]) < 0) {\r\n          target.push(arguments[i][j]);\r\n        }\r\n      }\r\n    }\r\n    // Blend objects\r\n    else {\r\n      for (var prop in arguments[i]){\r\n        // Recurse when both contain objects of same name\r\n        // and incoming is not a null object\r\n        if (typeof target[prop] !== 'undefined'\r\n          && typeof target[prop] === 'object'\r\n          && typeof arguments[i][prop] === 'object'\r\n          && arguments[i][prop] !== null) {\r\n            deepExtend(target[prop], clone(arguments[i][prop]));\r\n        }\r\n        // Otherwise just copy it over...\r\n        else if (\r\n          arguments[i][prop] !== undefined &&\r\n          typeof arguments[i][prop] !== 'function') {\r\n            target[prop] = clone(arguments[i][prop]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return target;\r\n}\r\n\r\nfunction clone(input){\r\n  return JSON.parse( JSON.stringify(input) );\r\n}\r\n","export const MD5 = function(d){const result = M(V(Y(X(d),8*d.length)));return result.toLowerCase()};function M(d){for(var _,m=\"0123456789ABCDEF\",f=\"\",r=0;r<d.length;r++)_=d.charCodeAt(r),f+=m.charAt(_>>>4&15)+m.charAt(15&_);return f}function X(d){for(var _=Array(d.length>>2),m=0;m<_.length;m++)_[m]=0;for(m=0;m<8*d.length;m+=8)_[m>>5]|=(255&d.charCodeAt(m/8))<<m%32;return _}function V(d){for(var _=\"\",m=0;m<32*d.length;m+=8)_+=String.fromCharCode(d[m>>5]>>>m%32&255);return _}function Y(d,_){d[_>>5]|=128<<_%32,d[14+(_+64>>>9<<4)]=_;for(var m=1732584193,f=-271733879,r=-1732584194,i=271733878,n=0;n<d.length;n+=16){var h=m,t=f,g=r,e=i;f=md5_ii(f=md5_ii(f=md5_ii(f=md5_ii(f=md5_hh(f=md5_hh(f=md5_hh(f=md5_hh(f=md5_gg(f=md5_gg(f=md5_gg(f=md5_gg(f=md5_ff(f=md5_ff(f=md5_ff(f=md5_ff(f,r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+0],7,-680876936),f,r,d[n+1],12,-389564586),m,f,d[n+2],17,606105819),i,m,d[n+3],22,-1044525330),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+4],7,-176418897),f,r,d[n+5],12,1200080426),m,f,d[n+6],17,-1473231341),i,m,d[n+7],22,-45705983),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+8],7,1770035416),f,r,d[n+9],12,-1958414417),m,f,d[n+10],17,-42063),i,m,d[n+11],22,-1990404162),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+12],7,1804603682),f,r,d[n+13],12,-40341101),m,f,d[n+14],17,-1502002290),i,m,d[n+15],22,1236535329),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+1],5,-165796510),f,r,d[n+6],9,-1069501632),m,f,d[n+11],14,643717713),i,m,d[n+0],20,-373897302),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+5],5,-701558691),f,r,d[n+10],9,38016083),m,f,d[n+15],14,-660478335),i,m,d[n+4],20,-405537848),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+9],5,568446438),f,r,d[n+14],9,-1019803690),m,f,d[n+3],14,-187363961),i,m,d[n+8],20,1163531501),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+13],5,-1444681467),f,r,d[n+2],9,-51403784),m,f,d[n+7],14,1735328473),i,m,d[n+12],20,-1926607734),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+5],4,-378558),f,r,d[n+8],11,-2022574463),m,f,d[n+11],16,1839030562),i,m,d[n+14],23,-35309556),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+1],4,-1530992060),f,r,d[n+4],11,1272893353),m,f,d[n+7],16,-155497632),i,m,d[n+10],23,-1094730640),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+13],4,681279174),f,r,d[n+0],11,-358537222),m,f,d[n+3],16,-722521979),i,m,d[n+6],23,76029189),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+9],4,-640364487),f,r,d[n+12],11,-421815835),m,f,d[n+15],16,530742520),i,m,d[n+2],23,-995338651),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+0],6,-198630844),f,r,d[n+7],10,1126891415),m,f,d[n+14],15,-1416354905),i,m,d[n+5],21,-57434055),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+12],6,1700485571),f,r,d[n+3],10,-1894986606),m,f,d[n+10],15,-1051523),i,m,d[n+1],21,-2054922799),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+8],6,1873313359),f,r,d[n+15],10,-30611744),m,f,d[n+6],15,-1560198380),i,m,d[n+13],21,1309151649),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+4],6,-145523070),f,r,d[n+11],10,-1120210379),m,f,d[n+2],15,718787259),i,m,d[n+9],21,-343485551),m=safe_add(m,h),f=safe_add(f,t),r=safe_add(r,g),i=safe_add(i,e)}return Array(m,f,r,i)}function md5_cmn(d,_,m,f,r,i){return safe_add(bit_rol(safe_add(safe_add(_,d),safe_add(f,i)),r),m)}function md5_ff(d,_,m,f,r,i,n){return md5_cmn(_&m|~_&f,d,_,r,i,n)}function md5_gg(d,_,m,f,r,i,n){return md5_cmn(_&f|m&~f,d,_,r,i,n)}function md5_hh(d,_,m,f,r,i,n){return md5_cmn(_^m^f,d,_,r,i,n)}function md5_ii(d,_,m,f,r,i,n){return md5_cmn(m^(_|~f),d,_,r,i,n)}function safe_add(d,_){var m=(65535&d)+(65535&_);return(d>>16)+(_>>16)+(m>>16)<<16|65535&m}function bit_rol(d,_){return d<<_|d>>>32-_}\r\n\r\nexport default MD5;\r\n","export function getScreenProfile(){\r\n  var keys, output;\r\n\r\n  if ('undefined' == typeof window || !window.screen) return {};\r\n\r\n  keys = ['height', 'width', 'colorDepth', 'pixelDepth', 'availHeight', 'availWidth'];\r\n  output = {};\r\n\r\n  for (var i = 0; i < keys.length; i++) {\r\n    output[keys[i]] = window.screen[keys[i]] ? window.screen[keys[i]] : null;\r\n  }\r\n\r\n  output.orientation = {\r\n    'angle' : window.screen.orientation ? window.screen.orientation['angle'] : 0,\r\n    'type'  : window.innerWidth > window.innerHeight ? 'landscape': 'portrait'\r\n  };\r\n\r\n  return output;\r\n}\r\n","export function getWindowProfile(){\r\n  var body, html, output;\r\n\r\n  if ('undefined' == typeof document) return {};\r\n\r\n  body = document.body || {};\r\n  html = document.documentElement || {};\r\n\r\n  output = {\r\n    'height': ('innerHeight' in window) ? window.innerHeight : document.documentElement.offsetHeight,\r\n    'width': ('innerWidth' in window) ? window.innerWidth : document.documentElement.offsetWidth,\r\n    'scrollHeight': Math.max( body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight ) || null\r\n  };\r\n\r\n  if (window.screen) {\r\n    output.ratio = {\r\n      'height': (window.screen.availHeight) ? parseFloat( (window.innerHeight/window.screen.availHeight).toFixed(2) ) : null,\r\n      'width': (window.screen.availWidth) ? parseFloat( (window.innerWidth/window.screen.availWidth).toFixed(2) ) : null\r\n    };\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\n/*\r\n  Notes:\r\n    document.documentElement.offsetHeight/Width is a workaround for IE8 and below, where window.innerHeight/Width is undefined\r\n*/\r\n","export function getDomNodePath(el){\r\n  if (!el.nodeName) return '';\r\n\r\n  var stack = [];\r\n  while ( el.parentNode != null ) {\r\n    // console.log(el.nodeName);\r\n    var sibCount = 0;\r\n    var sibIndex = 0;\r\n    for ( var i = 0; i < el.parentNode.childNodes.length; i++ ) {\r\n      var sib = el.parentNode.childNodes[i];\r\n      if ( sib.nodeName == el.nodeName ) {\r\n        if ( sib === el ) {\r\n          sibIndex = sibCount;\r\n        }\r\n        sibCount++;\r\n      }\r\n    }\r\n    if ( el.hasAttribute('id') && el.id != '' ) {\r\n      stack.unshift(el.nodeName.toLowerCase() + '#' + el.id);\r\n    } else if ( sibCount > 1 ) {\r\n      stack.unshift(el.nodeName.toLowerCase() + ':eq(' + sibIndex + ')');\r\n    } else {\r\n      stack.unshift(el.nodeName.toLowerCase());\r\n    }\r\n    el = el.parentNode;\r\n  }\r\n\r\n  return stack.slice(1).join(' > ');\r\n}\r\n\r\n\r\n// via: http://stackoverflow.com/a/16742828/2511985\r\n","import promiseFinally from './finally';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction isArray(x) {\n  return Boolean(x && typeof x.length !== 'undefined');\n}\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.all accepts an array'));\n    }\n\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.race accepts an array'));\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      Promise.resolve(arr[i]).then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  // @ts-ignore\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      // @ts-ignore\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","import KeenCore from './index';\r\nimport each from '@regang/keen-core/lib/utils/each';\r\nimport extend from '@regang/keen-core/lib/utils/extend';\r\nimport { listenerCore } from './utils/listener';\r\nimport {\r\n  recordEvent,\r\n  recordEvents\r\n} from './record-events-browser';\r\nimport {\r\n  deferEvent,\r\n  deferEvents,\r\n  queueCapacity,\r\n  queueInterval,\r\n  recordDeferredEvents\r\n} from './defer-events';\r\nimport { extendEvent, extendEvents } from './extend-events';\r\nimport { initAutoTrackingCore } from './browser-auto-tracking';\r\nimport { getBrowserProfile } from './helpers/getBrowserProfile';\r\nimport { getDatetimeIndex } from './helpers/getDatetimeIndex';\r\nimport { getDomainName } from './helpers/getDomainName';\r\nimport { getDomNodePath } from './helpers/getDomNodePath';\r\nimport { getDomNodeProfile } from './helpers/getDomNodeProfile';\r\nimport { getScreenProfile } from './helpers/getScreenProfile';\r\nimport { getScrollState } from './helpers/getScrollState';\r\nimport { getUniqueId } from './helpers/getUniqueId';\r\nimport { getWindowProfile } from './helpers/getWindowProfile';\r\nimport { cookie } from './utils/cookie';\r\nimport { deepExtend } from './utils/deepExtend';\r\nimport { serializeForm } from './utils/serializeForm';\r\nimport { timer } from './utils/timer';\r\nimport { setOptOut } from './utils/optOut';\r\nimport { isLocalStorageAvailable } from './utils/localStorage';\r\n\r\n// ------------------------\r\n// Methods\r\n// ------------------------\r\nextend(KeenCore.prototype, {\r\n  recordEvent,\r\n  recordEvents\r\n});\r\n\r\nextend(KeenCore.prototype, {\r\n  deferEvent,\r\n  deferEvents,\r\n  queueCapacity,\r\n  queueInterval,\r\n  recordDeferredEvents,\r\n  setOptOut\r\n});\r\nextend(KeenCore.prototype, {\r\n  extendEvent,\r\n  extendEvents\r\n});\r\n\r\n// ------------------------\r\n// Auto-Tracking\r\n// ------------------------\r\nconst initAutoTracking = initAutoTrackingCore(KeenCore);\r\nextend(KeenCore.prototype, {\r\n  initAutoTracking\r\n});\r\n\r\n// ------------------------\r\n// Helpers\r\n// ------------------------\r\nextend(KeenCore.helpers, {\r\n  getBrowserProfile,\r\n  getDatetimeIndex,\r\n  getDomainName,\r\n  getDomNodePath,\r\n  getDomNodeProfile,\r\n  getScreenProfile,\r\n  getScrollState,\r\n  getUniqueId,\r\n  getWindowProfile\r\n});\r\n\r\n// ------------------------\r\n// Utils\r\n// ------------------------\r\nconst listener = listenerCore(KeenCore);\r\nextend(KeenCore.utils, {\r\n  cookie,\r\n  deepExtend,\r\n  listener,\r\n  serializeForm,\r\n  timer\r\n});\r\n\r\nKeenCore.listenTo = (listenerHash) => {\r\n  each(listenerHash, (callback, key) => {\r\n    let split = key.split(' ');\r\n    let eventType = split[0],\r\n    selector = split.slice(1, split.length).join(' ');\r\n    // Create an unassigned listener\r\n    return listener(selector).on(eventType, callback);\r\n  });\r\n};\r\n\r\nexport let keenGlobals = undefined;\r\nif (typeof webpackKeenGlobals !== 'undefined') {\r\n  keenGlobals = webpackKeenGlobals;\r\n}\r\n\r\nif (isLocalStorageAvailable && localStorage.getItem('optout')) {\r\n  KeenCore.optedOut = true;\r\n}\r\n\r\nif (navigator.doNotTrack === '1'\r\n  || navigator.doNotTrack === 'yes') {\r\n  KeenCore.doNotTrack = true;\r\n}\r\n\r\nexport const Keen = KeenCore.extendLibrary(KeenCore); // deprecated, left for backward compatibility\r\nexport const KeenTracking = Keen;\r\nexport default Keen;\r\n","(function(env){\r\n  var previousKeen = env.Keen || undefined;\r\n  var each = require('./utils/each'),\r\n      extend = require('./utils/extend'),\r\n      parseParams = require('./utils/parse-params'),\r\n      serialize = require('./utils/serialize');\r\n\r\n  var Emitter = require('component-emitter');\r\n\r\n  function Client(props){\r\n    if (this instanceof Client === false) {\r\n      return new Client(props);\r\n    }\r\n    this.configure(props);\r\n\r\n    // Set up event handling\r\n    if (Client.debug) {\r\n      this.on('error', Client.log);\r\n    }\r\n    this.emit('ready');\r\n    Client.emit('client', this);\r\n  }\r\n\r\n  if (previousKeen && typeof previousKeen.resources === 'undefined') {\r\n    Client.legacyVersion = previousKeen;\r\n  }\r\n\r\n  Emitter(Client);\r\n  Emitter(Client.prototype);\r\n\r\n  extend(Client, {\r\n    debug: false,\r\n    enabled: true,\r\n    loaded: false,\r\n    version: '__VERSION__'\r\n  });\r\n\r\n  // Set or extend helpers\r\n  Client.helpers = Client.helpers || {};\r\n\r\n  // Set or extend resources\r\n  Client.resources = Client.resources || {};\r\n  extend(Client.resources, {\r\n    'base'      : '{protocol}://{host}',\r\n    'version'   : '{protocol}://{host}/3.0',\r\n    'projects'  : '{protocol}://{host}/3.0/projects',\r\n    'projectId' : '{protocol}://{host}/3.0/projects/{projectId}',\r\n    'events'    : '{protocol}://{host}/3.0/projects/{projectId}/events',\r\n    'queries'   : '{protocol}://{host}/3.0/projects/{projectId}/queries',\r\n    'datasets'  : '{protocol}://{host}/3.0/projects/{projectId}/datasets'\r\n  });\r\n\r\n  // Set or extend utils\r\n  Client.utils = Client.utils || {};\r\n  extend(Client.utils, {\r\n    'each'        : each,\r\n    'extend'      : extend,\r\n    'parseParams' : parseParams,\r\n    'serialize'   : serialize\r\n  });\r\n\r\n  Client.extendLibrary = function(target, source) {\r\n    var previous = previousKeen || source;\r\n    if (isDefined(previous) && isDefined(previous.resources)) {\r\n      each(previous, function(value, key) {\r\n        if (typeof value === 'object') {\r\n          target[key] = target[key] || {};\r\n          extend(target[key], value);\r\n        }\r\n        else {\r\n          target[key] = target[key] || value;\r\n        }\r\n      });\r\n      extend(target.prototype, previous.prototype);\r\n    }\r\n    return target;\r\n  };\r\n\r\n  Client.log = function(str){\r\n    if (Client.debug && typeof console === 'object') {\r\n      console.log('[Keen]', str);\r\n    }\r\n  };\r\n\r\n  Client.noConflict = function(){\r\n    if (typeof env.Keen !== 'undefined') {\r\n      env.Keen = Client.legacyVersion || previousKeen;\r\n    }\r\n    return Client;\r\n  };\r\n\r\n  Client.ready = function(fn){\r\n    if (Client.loaded) {\r\n      fn();\r\n    }\r\n    else {\r\n      Client.once('ready', fn);\r\n    }\r\n  };\r\n\r\n  Client.prototype.configure = function(obj){\r\n    var config = obj || {};\r\n    this.config = this.config || {\r\n      projectId    : undefined,\r\n      writeKey     : undefined,\r\n      host         : 'activity.brainhub.vn',\r\n      protocol     : 'https',\r\n      requestType  : 'jsonp',\r\n      resources    : extend({}, Client.resources)\r\n    };\r\n\r\n    // IE<10 request shim\r\n    if (typeof window !== 'undefined' && window.navigator && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1) {\r\n      config.protocol = document.location.protocol.replace(':', '');\r\n    }\r\n\r\n    if (config.host) {\r\n      config.host.replace(/.*?:\\/\\//g, '');\r\n    }\r\n\r\n    extend(this.config, config);\r\n    return this;\r\n  };\r\n\r\n  Client.prototype.masterKey = function(str){\r\n    if (!arguments.length) return this.config.masterKey;\r\n    this.config.masterKey = str ? String(str) : null;\r\n    return this;\r\n  };\r\n\r\n  Client.prototype.projectId = function(str){\r\n    if (!arguments.length) return this.config.projectId;\r\n    this.config.projectId = (str ? String(str) : null);\r\n    return this;\r\n  };\r\n\r\n  Client.prototype.resources = function(obj){\r\n    if (!arguments.length) return this.config.resources;\r\n    var self = this;\r\n    if (typeof obj === 'object') {\r\n      each(obj, function(value, key){\r\n        self.config.resources[key] = (value ? value : null);\r\n      });\r\n    }\r\n    return self;\r\n  };\r\n\r\n  Client.prototype.url = function(name){\r\n    var args = Array.prototype.slice.call(arguments, 1),\r\n        baseUrl = this.config.resources.base || '{protocol}://{host}',\r\n        path;\r\n\r\n    if (name && typeof name === 'string') {\r\n      if (this.config.resources[name]) {\r\n        path = this.config.resources[name];\r\n      }\r\n      else {\r\n        path = baseUrl + name;\r\n      }\r\n    }\r\n    else {\r\n      path = baseUrl;\r\n    }\r\n\r\n    each(this.config, function(value, key){\r\n      if (typeof value !== 'object') {\r\n        path = path.replace('{' + key + '}', value);\r\n      }\r\n    });\r\n\r\n    each(args, function(arg, i){\r\n      if (typeof arg === 'string') {\r\n        path += '/' + arg;\r\n      }\r\n      else if (typeof arg === 'object') {\r\n        path += '?';\r\n        each(arg, function(value, key){\r\n          path += key + '=' + value + '&';\r\n        });\r\n        path = path.slice(0, -1);\r\n      }\r\n    });\r\n\r\n    return path;\r\n  };\r\n\r\n  domReady(function(){\r\n    Client.loaded = true;\r\n    Client.emit('ready');\r\n  });\r\n\r\n  function domReady(fn){\r\n    if (Client.loaded || typeof document === 'undefined') {\r\n      fn();\r\n      return;\r\n    }\r\n    // Firefox 3.5 shim\r\n    if(document.readyState == null && document.addEventListener){\r\n      document.addEventListener('DOMContentLoaded', function DOMContentLoaded(){\r\n        document.removeEventListener('DOMContentLoaded', DOMContentLoaded, false);\r\n        document.readyState = 'complete';\r\n      }, false);\r\n      document.readyState = 'loading';\r\n    }\r\n    testDom(fn);\r\n  }\r\n\r\n  function testDom(fn){\r\n    if (/in/.test(document.readyState)) {\r\n      setTimeout(function(){\r\n        testDom(fn);\r\n      }, 9);\r\n    }\r\n    else {\r\n      fn();\r\n    }\r\n  }\r\n\r\n  function isDefined(target) {\r\n    return typeof target !== 'undefined';\r\n  }\r\n\r\n  function isUndefined(target) {\r\n    return typeof target === 'undefined';\r\n  }\r\n\r\n  module.exports = Client;\r\n\r\n}).call(this, typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {});\r\n","module.exports = parseParams;\r\n\r\nfunction parseParams(str){\r\n  // via: http://stackoverflow.com/a/2880929/2511985\r\n  var urlParams = {},\r\n      match,\r\n      pl     = /\\+/g,  // Regex for replacing addition symbol with a space\r\n      search = /([^&=]+)=?([^&]*)/g,\r\n      decode = function (s) { return decodeURIComponent(s.replace(pl, \" \")); },\r\n      query  = str.split(\"?\")[1];\r\n\r\n  while (!!(match=search.exec(query))) {\r\n    urlParams[decode(match[1])] = decode(match[2]);\r\n  }\r\n  return urlParams;\r\n};\r\n","var each = require('./each'),\r\n    extend = require('./extend');\r\n\r\nmodule.exports = serialize;\r\n\r\nfunction serialize(data){\r\n  var query = [];\r\n  each(data, function(value, key){\r\n    if ('string' !== typeof value) {\r\n      value = JSON.stringify(value);\r\n    }\r\n    query.push(key + '=' + encodeURIComponent(value));\r\n  });\r\n  return query.join('&');\r\n}\r\n","import Emitter from 'component-emitter';\r\nimport each from '@regang/keen-core/lib/utils/each';\r\n/*\r\n\r\n  // Create a new element listner\r\n  var myClickerCatcher = Keen.utils.listener(\".nav li > a\");\r\n\r\n  // Listen for a given event\r\n  myClicker.on(\"click\", function(e){\r\n    // do stuff!\r\n  });\r\n\r\n  // Listen for event once\r\n  myClicker.once(\"click\", function(e){ });\r\n\r\n  // Cancel a given event listener\r\n  myClicker.off(\"click\");\r\n\r\n  // Cancel all event listners\r\n  myClicker.off();\r\n\r\n*/\r\n\r\nexport const listenerCore = function(ctx){\r\n\r\n  // Make sure this object exists\r\n  ctx.domListeners = ctx.domListeners || {\r\n    /*\r\n    'click': {\r\n      '.nav li > a': [fn, fn, fn]\r\n    }\r\n    */\r\n  };\r\n\r\n  function listener(str){\r\n    if (!str) return;\r\n    if (this instanceof listener === false) {\r\n      return new listener(str);\r\n    }\r\n    this.selector = str;\r\n    return this;\r\n  }\r\n\r\n  listener.prototype.on = function(str, fn){\r\n    var self = this;\r\n\r\n    if (arguments.length !== 2 || 'string' !== typeof str || 'function' !== typeof fn) return this;\r\n\r\n    // Set each listener on a parent dictionary, indexed by event:\r\n    if ('undefined' === typeof ctx.domListeners[str]) {\r\n      addListener(str, eventHandler(str));\r\n      ctx.domListeners[str] = {};\r\n    }\r\n    ctx.domListeners[str][self.selector] = ctx.domListeners[str][self.selector] || [];\r\n    ctx.domListeners[str][self.selector].push(fn);\r\n    return self;\r\n  };\r\n\r\n  listener.prototype.once = function(str, fn){\r\n    var self = this;\r\n    function on() {\r\n      self.off(str, on);\r\n      return fn.apply(self, arguments);\r\n    }\r\n    on.fn = fn;\r\n    self.on(str, on);\r\n    return self;\r\n  };\r\n\r\n  listener.prototype.off = function(str, fn){\r\n    var self = this, survivors = [];\r\n    if (arguments.length === 2) {\r\n      each(ctx.domListeners[str][self.selector], function(handler, i){\r\n        if (handler === fn || handler.fn === fn) return;\r\n        survivors.push(handler);\r\n      });\r\n      ctx.domListeners[str][self.selector] = survivors;\r\n    }\r\n    else if (arguments.length === 1) {\r\n      try {\r\n        delete ctx.domListeners[str][self.selector];\r\n      }\r\n      catch(e){\r\n        ctx.domListeners[str][self.selector] = [];\r\n      }\r\n    }\r\n    else {\r\n      // loop over every eventType and delete handlers\r\n      each(ctx.domListeners, function(hash, eventType){\r\n        // if ('undefined' === typeof hash[str]) return;\r\n        try {\r\n          delete ctx.domListeners[eventType][self.selector];\r\n        }\r\n        catch(e){\r\n          ctx.domListeners[eventType][self.selector] = function(){};\r\n        }\r\n      });\r\n    }\r\n    return self;\r\n  };\r\n\r\n  function eventHandler(eventType){\r\n    return function(e){\r\n      var evt, target;\r\n\r\n      evt = e || window.event;\r\n      target = evt.target || evt.srcElement;\r\n\r\n      // If nothing assigned to this event type, let it go\r\n      if ('undefined' === ctx.domListeners[eventType]) return;\r\n\r\n      each(ctx.domListeners[eventType], function(handlers, key){\r\n\r\n        if (matches(target, key)) {\r\n          // Call all handlers for this eventType + node\r\n          each(handlers, function(fn, i){\r\n            if ('click' === eventType && 'A' === target.nodeName) {\r\n              deferClickEvent(evt, target, fn);\r\n            }\r\n            else if ('submit' === eventType && 'FORM' === target.nodeName) {\r\n              deferFormSubmit(evt, target, fn);\r\n            }\r\n            else {\r\n              fn(evt);\r\n            }\r\n          });\r\n        }\r\n        else if ('window' === key) {\r\n          // Call all handlers\r\n          each(handlers, function(fn, i){\r\n            fn(evt);\r\n          });\r\n        }\r\n        return;\r\n      });\r\n    };\r\n  }\r\n\r\n  return listener;\r\n}\r\n\r\n\r\n// ------------------------------\r\n// Attach global event listener\r\n// ------------------------------\r\n\r\nfunction addListener(eventType, fn){\r\n  if (document.addEventListener) {\r\n    document.addEventListener(eventType, fn, false);\r\n  } else {\r\n    document.attachEvent(\"on\" + eventType, fn);\r\n  }\r\n}\r\n\r\n\r\n// ------------------------------\r\n// Match DOM element to selector\r\n// ------------------------------\r\n\r\nfunction matches(elem, selector) {\r\n  // We'll use querySelectorAll to find all element matching the selector,\r\n  // then check if the given element is included in that list.\r\n  // Executing the query on the parentNode reduces the resulting nodeList,\r\n  // document doesn't have a parentNode, though.\r\n  var nodeList = ( elem.parentNode || document ).querySelectorAll( selector ) || [],\r\n      i = nodeList.length;\r\n\r\n  // loop on the nodeList\r\n  while ( i-- ) {\r\n    if ( nodeList[i] == elem ) { return true; }\r\n  }\r\n  return false;\r\n}\r\n\r\n\r\n// ------------------------------\r\n// Handle 'click' events (A)\r\n// ------------------------------\r\n\r\nfunction deferClickEvent(evt, anchor, callback){\r\n  var timeout = 500,\r\n      targetAttr,\r\n      cbResponse;\r\n\r\n  // Get 'target' attribute from anchor\r\n  if (anchor.getAttribute !== void 0) {\r\n    targetAttr = anchor.getAttribute(\"target\");\r\n  } else if (anchor.target) {\r\n    targetAttr = anchor.target;\r\n  }\r\n\r\n  // Fire listener and catch possible response (return false)\r\n  cbResponse = callback(evt);\r\n\r\n  // If prevented within callback, bail:\r\n  if (('boolean' === typeof cbResponse && cbResponse === false) || evt.defaultPrevented || evt.returnValue === false) {\r\n    if (evt.preventDefault) {\r\n      evt.preventDefault();\r\n    }\r\n    evt.returnValue = false;\r\n    return false;\r\n  }\r\n  // Else if anchor doesn't kick off a new window or tab.. defer and replay the event:\r\n  else if (targetAttr !== '_blank' && targetAttr !== 'blank' && !evt.metaKey && !anchor.hasAttribute('download')) {\r\n    if (evt.preventDefault) {\r\n      evt.preventDefault();\r\n    }\r\n    evt.returnValue = false;\r\n    if (\r\n      anchor.href\r\n      && anchor.href !== '#'\r\n      && anchor.href !== (window.location + '#')\r\n    ) {\r\n      if (typeof cbResponse !== 'undefined') {\r\n        if (navigator && navigator.sendBeacon) {\r\n          window.location = anchor.href;\r\n          return;\r\n        }\r\n        // promise\r\n        cbResponse.then(() => {\r\n          window.location = anchor.href;\r\n        }).catch(err => {\r\n          // change location anyway - to not let user hanging\r\n          window.location = anchor.href;\r\n        });\r\n      } else {\r\n        setTimeout(function(){\r\n          window.location = anchor.href;\r\n        }, timeout);\r\n      }\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n\r\n// ------------------------------\r\n// Handle 'submit' events (FORM)\r\n// ------------------------------\r\n\r\nfunction deferFormSubmit(evt, form, callback){\r\n  var timeout = 500;\r\n  // Fire listener and catch possible response (return false)\r\n  var cbResponse = callback(evt);\r\n\r\n  // If prevented within callback, bail\r\n  if (('boolean' === typeof cbResponse && cbResponse === false) || evt.defaultPrevented || evt.returnValue === false) {\r\n    if (evt.preventDefault) {\r\n      evt.preventDefault();\r\n    }\r\n    evt.returnValue = false;\r\n    return false;\r\n  }\r\n  // Defer and replay event\r\n  else {\r\n    if (evt.preventDefault) {\r\n      evt.preventDefault();\r\n    }\r\n    evt.returnValue = false;\r\n    if (typeof cbResponse !== 'undefined') {\r\n      if (navigator && navigator.sendBeacon) {\r\n        form.submit();\r\n        return;\r\n      }\r\n      // promise\r\n      cbResponse.then(() => {\r\n        form.submit();\r\n      }).catch(err => {\r\n        // submit form anyway - to not let user hanging\r\n        form.submit();\r\n      });\r\n    } else {\r\n      setTimeout(function(){\r\n        form.submit();\r\n      }, timeout);\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n","import 'promise-polyfill/src/polyfill';\r\nimport 'whatwg-fetch';\r\n\r\nimport base64 from '@regang/keen-core/lib/utils/base64';\r\nimport each from '@regang/keen-core/lib/utils/each';\r\nimport extend from '@regang/keen-core/lib/utils/extend';\r\n\r\nimport Keen from './index';\r\nimport { version } from '../package.json';\r\n\r\nimport { getExtendedEventBody } from './extend-events';\r\nimport fetchRetry from './utils/fetchRetry';\r\nimport isUnique from './utils/unique';\r\n\r\n// ------------------------------\r\n// .recordEvent\r\n// ------------------------------\r\n\r\nexport function recordEvent(eventCollectionOrConfigObject, eventBody, callback){\r\n  let eventCollection = eventCollectionOrConfigObject;\r\n  let useBeaconApi = false;\r\n  let unique;\r\n  let configObject;\r\n  let clientConfig = this.config;\r\n\r\n  if (typeof eventCollectionOrConfigObject === 'object'\r\n    && eventCollectionOrConfigObject) {\r\n    // slowly but surely we migrate to one object with all args\r\n    configObject = eventCollectionOrConfigObject;\r\n    eventCollection = eventCollectionOrConfigObject.collection\r\n      || eventCollectionOrConfigObject.event_collection;\r\n    eventBody = eventCollectionOrConfigObject.event;\r\n    callback = eventCollectionOrConfigObject.callback;\r\n    unique = eventCollectionOrConfigObject.unique;\r\n  }\r\n\r\n  const url = this.url('events', encodeURIComponent(eventCollection));\r\n  let data = {};\r\n\r\n  if (!checkValidation.call(this, callback)) {\r\n    return;\r\n  }\r\n\r\n  if (!eventCollection || typeof eventCollection !== 'string') {\r\n    handleValidationError.call(this, 'Collection name must be a string.', callback);\r\n    return;\r\n  }\r\n\r\n  extend(data, eventBody);\r\n\r\n  // ------------------------------\r\n  // Run extendEvent(s) transforms\r\n  // ------------------------------\r\n  const extendedEventsHash = {};\r\n  getExtendedEventBody(extendedEventsHash, this.extensions.events);\r\n  getExtendedEventBody(extendedEventsHash, this.extensions.collections[eventCollection]);\r\n  getExtendedEventBody(extendedEventsHash, [data]);\r\n\r\n  if (unique) {\r\n    return isUnique(configObject, extendedEventsHash).then(isUniqueResult => {\r\n      if (!isUniqueResult) {\r\n        return Promise.resolve({\r\n          created: false,\r\n          message: '[NOT_UNIQUE] This event has already been recorded'\r\n        });\r\n      }\r\n      return recordEvent.call(this, { ...eventCollectionOrConfigObject, unique: undefined });\r\n    });\r\n  }\r\n\r\n  this.emit('recordEvent', eventCollection, extendedEventsHash);\r\n\r\n  if (!Keen.enabled) {\r\n    handleValidationError.call(this, 'Keen.enabled is set to false.', callback);\r\n    return false;\r\n  }\r\n\r\n  if (Keen.optedOut) {\r\n    return Promise.resolve({\r\n      created: false,\r\n      message: 'Keen.optedOut is set to true.'\r\n    })\r\n  }\r\n\r\n  if (Keen.doNotTrack) {\r\n    return Promise.resolve({\r\n      created: false,\r\n      message: 'Keen.doNotTrack is set to true.'\r\n    })\r\n  }\r\n\r\n  return send.call(this, { url, extendedEventsHash, callback, configObject, eventCollection });\r\n}\r\n\r\n// ------------------------------\r\n// .recordEvents\r\n// ------------------------------\r\n\r\nexport function recordEvents(eventsHash, callback){\r\n  const self = this;\r\n  const url = this.url('events');\r\n\r\n  if (!checkValidation.call(this, callback)) {\r\n    return;\r\n  }\r\n\r\n  if ('object' !== typeof eventsHash || eventsHash instanceof Array) {\r\n    handleValidationError.call(this, 'First argument must be an object', callback );\r\n    return;\r\n  }\r\n\r\n  if (arguments.length > 2) {\r\n    handleValidationError.call(this, 'Incorrect arguments provided to #recordEvents method', callback);\r\n    return;\r\n  }\r\n\r\n  // ------------------------------\r\n  // Run extendEvent(s) transforms\r\n  // ------------------------------\r\n  const extendedEventsHash = {};\r\n  each(eventsHash, function(eventList, eventCollection){\r\n    // Find or create collection on new hash\r\n    extendedEventsHash[eventCollection] = extendedEventsHash[eventCollection] || [];\r\n    // Loop over each eventBody in the existing hash\r\n    each(eventList, function(eventBody, index){\r\n      // Create a new data object\r\n      let extendedEventBody = {};\r\n      // Process \"events\" transform pipeline\r\n      getExtendedEventBody(extendedEventBody, self.extensions.events);\r\n      // Process \"collection\" transform pipeline\r\n      getExtendedEventBody(extendedEventBody, self.extensions.collections[eventCollection]);\r\n      // Blend existing eventBody data into the result\r\n      getExtendedEventBody(extendedEventBody, [eventBody]);\r\n      // Push extendedEventBody into new hash\r\n      extendedEventsHash[eventCollection].push(extendedEventBody);\r\n    });\r\n  });\r\n\r\n  this.emit('recordEvents', extendedEventsHash);\r\n\r\n  if (!Keen.enabled) {\r\n    handleValidationError.call(this, 'Keen.enabled is set to false.', callback);\r\n    return false;\r\n  }\r\n\r\n  if (Keen.optedOut) {\r\n    return Promise.resolve({\r\n      created: false,\r\n      message: 'Keen.optedOut is set to true.'\r\n    })\r\n  }\r\n\r\n  if (Keen.doNotTrack) {\r\n    return Promise.resolve({\r\n      created: false,\r\n      message: 'Keen.doNotTrack is set to true.'\r\n    })\r\n  }\r\n\r\n  return send.call(this, { url, extendedEventsHash, callback });\r\n}\r\n\r\nfunction send({ url, extendedEventsHash, callback, configObject = {}, eventCollection}){\r\n  const clientConfig = this.config;\r\n  const requestType = configObject.requestType // specific method for one request\r\n    || this.config.requestType; // global request type of client\r\n\r\n  if (\r\n    navigator && navigator.sendBeacon &&\r\n    requestType === 'beaconAPI'\r\n      // so you can send specific recordEvent() using beaconAPI\r\n      // even if your global client's config prefers Fetch\r\n  ) {\r\n    navigator.sendBeacon(\r\n      `${url}?api_key=${this.writeKey()}`,\r\n      JSON.stringify(extendedEventsHash)\r\n    );\r\n    if (callback) {\r\n      // Beacon API is not handling responses nor errors\r\n      callback();\r\n    }\r\n    return this;\r\n  }\r\n\r\n  // this is IMAGE beacon, not the Beacon API. deprecated\r\n  if (requestType === 'beacon' || requestType === 'img') {\r\n    const getRequestUrl = this.url('events', encodeURIComponent(eventCollection), {\r\n      api_key  : this.writeKey(),\r\n      data     : encodeURIComponent( base64.encode( JSON.stringify(extendedEventsHash) ) ),\r\n      modified : new Date().getTime()\r\n    });\r\n    const getRequestUrlOkLength = getRequestUrl.length < getUrlMaxLength();\r\n\r\n    if (getRequestUrlOkLength) {\r\n      sendBeacon.call(this, getRequestUrl, callback);\r\n    }\r\n    else {\r\n      if (callback) {\r\n        callback('Beacon URL length exceeds current browser limit, and XHR is not supported.', null);\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  if (typeof fetch !== 'undefined') {\r\n    return sendFetch.call(this, 'POST', url, extendedEventsHash, callback);\r\n  }\r\n\r\n  return this;\r\n}\r\n\r\nfunction sendFetch(method, url, data, callback = undefined){\r\n  const self = this;\r\n\r\n  return fetchRetry(url, {\r\n      method,\r\n      body: data ? JSON.stringify(data) : '',\r\n      mode: 'cors',\r\n      redirect: 'follow',\r\n      referrerPolicy: self.referrerPolicy() || 'unsafe-url',\r\n      headers: {\r\n        'Authorization': self.writeKey(),\r\n        'Content-Type': 'application/json',\r\n        'keen-sdk': `javascript-${version}`\r\n      },\r\n      // keepalive: true, not supported for CORS yet\r\n      retry: self.config.retry\r\n    })\r\n    .catch(connectionError => {\r\n      if (typeof callback !== 'undefined') {\r\n        callback.call(self, connectionError, null);\r\n      }\r\n      self.emit('error', connectionError);\r\n      return Promise.reject(connectionError);\r\n    })\r\n    .then(response => {\r\n      if (response.ok) {\r\n        return response.json();\r\n      }\r\n\r\n      return response.json().then(responseJSON => {\r\n        return Promise.reject({\r\n          error_code: responseJSON.error_code,\r\n          body: responseJSON.message,\r\n          status: response.status,\r\n          ok: false,\r\n          statusText: response.statusText\r\n        });\r\n      });\r\n    }).then(responseJSON => {\r\n      const eventsSavedSuccessfuly = checkEventsSavedSuccessfuly(responseJSON);\r\n      if (eventsSavedSuccessfuly) {\r\n        if (typeof callback !== 'undefined') {\r\n          callback.call(self, null, responseJSON);\r\n        }\r\n        return Promise.resolve(responseJSON);\r\n      } else {\r\n        if (typeof callback !== 'undefined') {\r\n          callback.call(self, responseJSON, null);\r\n        }\r\n        self.emit('error', responseJSON);\r\n        return Promise.reject(responseJSON);\r\n      }\r\n    });\r\n}\r\n\r\nfunction checkEventsSavedSuccessfuly(response){\r\n  // single event\r\n  if (typeof response.created !== 'undefined') {\r\n    if (response.created) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  // multiple events\r\n  const responseKeys = Object.keys(response);\r\n  const notSavedEvents = responseKeys\r\n    .map(collection => {\r\n      return response[collection].filter(event => !event.success);\r\n    })\r\n    .filter(collection => collection.length > 0);\r\n\r\n  if (notSavedEvents.length === 0) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n// Validation\r\nfunction checkValidation(callback){\r\n\r\n  if (!this.projectId()) {\r\n    handleValidationError.call(this, 'Keen.Client is missing a projectId property.', callback);\r\n    return false;\r\n  }\r\n  if (!this.writeKey()) {\r\n    handleValidationError.call(this, 'Keen.Client is missing a writeKey property.', callback);\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction handleValidationError(message, callback){\r\n  const err = `Event(s) not recorded: ${message}`;\r\n  this.emit('error', err);\r\n  if (callback) {\r\n    callback.call(this, err, null);\r\n  }\r\n}\r\n\r\nfunction getUrlMaxLength(){\r\n  if ('undefined' !== typeof window && navigator) {\r\n    if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > 0) {\r\n      return 1900;\r\n    }\r\n  }\r\n  return 16000;\r\n}\r\n\r\n/*\r\n  DEPRECATED METHODS\r\n*/\r\n\r\n// Image Beacon Requests\r\n// DEPRECATED\r\nfunction sendBeacon(url, callback){\r\n  var self = this,\r\n      img = document.createElement('img'),\r\n      loaded = false;\r\n\r\n  img.onload = function() {\r\n    loaded = true;\r\n    if ('naturalHeight' in this) {\r\n      if (this.naturalHeight + this.naturalWidth === 0) {\r\n        this.onerror();\r\n        return;\r\n      }\r\n    } else if (this.width + this.height === 0) {\r\n      this.onerror();\r\n      return;\r\n    }\r\n    if (callback) {\r\n      callback.call(self);\r\n    }\r\n  };\r\n  img.onerror = function() {\r\n    loaded = true;\r\n    if (callback) {\r\n      callback.call(self, 'An error occurred!', null);\r\n    }\r\n  };\r\n  img.src = url + '&c=clv1';\r\n}\r\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = {\r\n  map: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\r\n  encode: function (n) {\r\n    \"use strict\";\r\n    var o = \"\", i = 0, m = this.map, i1, i2, i3, e1, e2, e3, e4;\r\n    n = this.utf8.encode(n);\r\n    while (i < n.length) {\r\n      i1 = n.charCodeAt(i++); i2 = n.charCodeAt(i++); i3 = n.charCodeAt(i++);\r\n      e1 = (i1 >> 2); e2 = (((i1 & 3) << 4) | (i2 >> 4)); e3 = (isNaN(i2) ? 64 : ((i2 & 15) << 2) | (i3 >> 6));\r\n      e4 = (isNaN(i2) || isNaN(i3)) ? 64 : i3 & 63;\r\n      o = o + m.charAt(e1) + m.charAt(e2) + m.charAt(e3) + m.charAt(e4);\r\n    } return o;\r\n  },\r\n  decode: function (n) {\r\n    \"use strict\";\r\n    var o = \"\", i = 0, m = this.map, cc = String.fromCharCode, e1, e2, e3, e4, c1, c2, c3;\r\n    n = n.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\r\n    while (i < n.length) {\r\n      e1 = m.indexOf(n.charAt(i++)); e2 = m.indexOf(n.charAt(i++));\r\n      e3 = m.indexOf(n.charAt(i++)); e4 = m.indexOf(n.charAt(i++));\r\n      c1 = (e1 << 2) | (e2 >> 4); c2 = ((e2 & 15) << 4) | (e3 >> 2);\r\n      c3 = ((e3 & 3) << 6) | e4;\r\n      o = o + (cc(c1) + ((e3 != 64) ? cc(c2) : \"\")) + (((e4 != 64) ? cc(c3) : \"\"));\r\n    } return this.utf8.decode(o);\r\n  },\r\n  utf8: {\r\n    encode: function (n) {\r\n      \"use strict\";\r\n      var o = \"\", i = 0, cc = String.fromCharCode, c;\r\n      while (i < n.length) {\r\n        c = n.charCodeAt(i++); o = o + ((c < 128) ? cc(c) : ((c > 127) && (c < 2048)) ?\r\n        (cc((c >> 6) | 192) + cc((c & 63) | 128)) : (cc((c >> 12) | 224) + cc(((c >> 6) & 63) | 128) + cc((c & 63) | 128)));\r\n        } return o;\r\n    },\r\n    decode: function (n) {\r\n      \"use strict\";\r\n      var o = \"\", i = 0, cc = String.fromCharCode, c2, c;\r\n      while (i < n.length) {\r\n        c = n.charCodeAt(i);\r\n        o = o + ((c < 128) ? [cc(c), i++][0] : ((c > 191) && (c < 224)) ?\r\n        [cc(((c & 31) << 6) | ((c2 = n.charCodeAt(i + 1)) & 63)), (i += 2)][0] :\r\n        [cc(((c & 15) << 12) | (((c2 = n.charCodeAt(i + 1)) & 63) << 6) | ((c3 = n.charCodeAt(i + 2)) & 63)), (i += 3)][0]);\r\n      } return o;\r\n    }\r\n  }\r\n};\r\n","import 'promise-polyfill/src/polyfill';\r\nimport 'whatwg-fetch';\r\n\r\nimport configDefault from '../config-default.js';\r\n\r\nexport default function(url, options) {\r\n  const config = {\r\n    ...configDefault,\r\n    ...(options.retry || {})\r\n  };\r\n\r\n  const retriesLimit = config.retry.limit;\r\n  const retryInitialDelay = config.retry.initialDelay;\r\n  const retryOn = config.retry.retryOnResponseStatuses;\r\n  let retriesCount = 0;\r\n\r\n  if (retryOn && !(retryOn instanceof Array)) {\r\n    throw {\r\n      name: 'ArgumentError',\r\n      message: 'retryOn property expects an array'\r\n    }\r\n  }\r\n\r\n  return new Promise(function(resolve, reject) {\r\n    const wrappedFetch = function(n) {\r\n      fetch(url, options)\r\n        .then(function(response) {\r\n          if (retryOn.indexOf(response.status) === -1) {\r\n            resolve(response);\r\n          } else {\r\n            if (n > 0) {\r\n              retry();\r\n            } else {\r\n              reject(response);\r\n            }\r\n          }\r\n        })\r\n        .catch(function(error) {\r\n          if (n > 0) {\r\n            retry();\r\n          } else {\r\n            reject(error);\r\n          }\r\n        });\r\n    };\r\n\r\n    function retry() {\r\n      retriesCount = retriesCount + 1;\r\n      setTimeout(function() {\r\n          wrappedFetch(retriesLimit - retriesCount);\r\n        }, 2^retriesCount * retryInitialDelay);\r\n    }\r\n\r\n    wrappedFetch(retriesLimit - retriesCount);\r\n  });\r\n};\r\n","import 'promise-polyfill/src/polyfill';\r\n\r\nimport md5 from './md5';\r\nimport { getFromCache, saveToCache } from './cache-browser';\r\n\r\nimport configDefault from '../config-default.js';\r\n\r\nlet uniqueIds = [];\r\n\r\nexport const isUnique = (customCacheConfig, extendedEventBody) => {\r\n  const configCache = { ...configDefault.cache, ...customCacheConfig.cache };\r\n  const stringifiedEvent = JSON.stringify(extendedEventBody);\r\n  const { hashingMethod } = configCache;\r\n  const hash = hashingMethod && hashingMethod.toLowerCase() === 'md5'\r\n    ? md5(stringifiedEvent) : stringifiedEvent;\r\n  const expiryTime = configCache.maxAge ? (Date.now() + configCache.maxAge) : undefined;\r\n  const item = {\r\n    hash,\r\n    expiryTime\r\n  };\r\n  if (expiryTime){\r\n    const now = Date.now();\r\n    uniqueIds = uniqueIds.filter(item => item.expiryTime > now);\r\n  }\r\n\r\n  const alreadySentEvent = uniqueIds.find(item => item.hash === hash);\r\n  if (alreadySentEvent) {\r\n    if (alreadySentEvent.expiryTime && alreadySentEvent.expiryTime < Date.now()) {\r\n      uniqueIds = uniqueIds.filter(item => item.hash !== hash);\r\n    } else {\r\n      return Promise.resolve(false);\r\n    }\r\n  }\r\n  uniqueIds.push(item);\r\n  if (configCache.storage && configCache.storage.toLowerCase() === 'indexeddb') {\r\n    return getFromCache(hash, configCache).then(alreadySentEvent => {\r\n      if (alreadySentEvent) {\r\n        return false;\r\n      }\r\n      saveToCache(hash, configCache);\r\n      return true;\r\n    });\r\n  }\r\n\r\n  return Promise.resolve(true);\r\n}\r\n\r\nexport default isUnique;\r\n","import 'promise-polyfill/src/polyfill';\r\nimport 'whatwg-fetch';\r\n\r\nimport md5 from './md5';\r\n\r\nimport configDefault from '../config-default.js';\r\n\r\nif (typeof self === 'undefined') {\r\n  console.log('IndexedDB is available only in Browser ENV');\r\n}\r\n\r\nconst indexedDBAvailable = typeof self !== 'undefined' && 'indexedDB' in self;\r\n\r\nlet cachingEnabled = true;\r\n\r\nif (!indexedDBAvailable) {\r\n    // console.log(\"Your browser doesn't support a stable version of IndexedDB.\");\r\n    cachingEnabled = false; // graceful degradation\r\n}\r\n\r\nlet db;\r\nlet cacheConfig = {\r\n  ...configDefault.cache\r\n};\r\n\r\nfunction initializeIndexedDb(requestCacheConfig = {}){\r\n  if (db) { return Promise.resolve(); }\r\n  if (!cachingEnabled) { return Promise.resolve(); }\r\n  cacheConfig = {\r\n    ...cacheConfig,\r\n    ...requestCacheConfig\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    const dbConnectionRequest = self.indexedDB.open(cacheConfig.dbName);\r\n    dbConnectionRequest.onerror = function(event) {\r\n      cachingEnabled = false;\r\n      resolve();\r\n    };\r\n\r\n    dbConnectionRequest.onupgradeneeded = function(event) {\r\n      const db = event.target.result;\r\n      const objectStore = db\r\n        .createObjectStore(cacheConfig.dbCollectionName,\r\n          { keyPath: cacheConfig.dbCollectionKey });\r\n      objectStore.createIndex(\r\n        cacheConfig.dbCollectionKey,\r\n        cacheConfig.dbCollectionKey,\r\n        { unique: true }\r\n      );\r\n      objectStore.createIndex('expiryTime', 'expiryTime', { unique: false });\r\n    };\r\n\r\n    dbConnectionRequest.onsuccess = function(event) {\r\n      db = event.target.result;\r\n      db.onerror = function(event) {\r\n        cachingEnabled = false; // graceful degradation\r\n      };\r\n      resolve(db);\r\n    };\r\n  });\r\n}\r\n\r\nexport const saveToCache = (hash, configOptions = {}) => {\r\n  return initializeIndexedDb(configOptions).then(() => {\r\n    const transactionSave = db\r\n      .transaction(cacheConfig.dbCollectionName, \"readwrite\")\r\n      .objectStore(cacheConfig.dbCollectionName);\r\n    const requestSave = transactionSave.add({\r\n      hash,\r\n      expiryTime: Date.now() + cacheConfig.maxAge\r\n    });\r\n    requestSave.onsuccess = function(event) {\r\n    };\r\n    requestSave.onerror = function(event) {\r\n      cachingEnabled = false;\r\n    };\r\n  });\r\n}\r\n\r\nexport const getFromCache = (hash, configOptions = {}) => {\r\n  return initializeIndexedDb(configOptions).then(() => {\r\n    return new Promise((resolve, reject) => {\r\n      if (!cachingEnabled) {\r\n        return resolve(null);\r\n      }\r\n\r\n      const transactionCleanUp = db\r\n        .transaction(cacheConfig.dbCollectionName, \"readwrite\")\r\n        .objectStore(cacheConfig.dbCollectionName);\r\n      const indexCleanUp = transactionCleanUp.index('expiryTime');\r\n      const upperBoundOpenKeyRange = IDBKeyRange.upperBound(Date.now(), true);\r\n      indexCleanUp.openCursor(upperBoundOpenKeyRange).onsuccess = function(event) {\r\n        let cursor = event.target.result;\r\n        if (cursor) {\r\n          let transactionDelete = db\r\n            .transaction(cacheConfig.dbCollectionName, \"readwrite\")\r\n            .objectStore(cacheConfig.dbCollectionName)\r\n            .delete(event.target.result.value[cacheConfig.dbCollectionKey]);\r\n          cursor.continue();\r\n        }\r\n      };\r\n\r\n      const transactionIndex = db\r\n        .transaction(cacheConfig.dbCollectionName, \"readwrite\")\r\n        .objectStore(cacheConfig.dbCollectionName);\r\n      const index = transactionIndex.index(cacheConfig.dbCollectionKey);\r\n      const responseFromCache = index.get(hash);\r\n      responseFromCache.onsuccess = function(event) {\r\n        if (!event.target.result ||\r\n          event.target.result.expiryTime < Date.now()\r\n        ) {\r\n          if (event.target.result && event.target.result.expiryTime < Date.now()){\r\n            const transactionDelete = db\r\n              .transaction(cacheConfig.dbCollectionName, \"readwrite\")\r\n              .objectStore(cacheConfig.dbCollectionName)\r\n              .delete(event.target.result[cacheConfig.dbCollectionKey]);\r\n            transactionDelete.onsuccess = (event) => {\r\n              resolve(getFromCache(hash, configOptions));\r\n            };\r\n            transactionDelete.onerror = (event) => {\r\n              cachingEnabled = false;\r\n              resolve(getFromCache(hash, configOptions));\r\n            };\r\n            return resolve(null);\r\n          }\r\n          return resolve(null);\r\n        } else {\r\n          return resolve(event.target.result);\r\n        }\r\n      };\r\n      responseFromCache.onerror = function(event) {\r\n        cachingEnabled = false;\r\n        resolve(getFromCache(hash, configOptions));\r\n      };\r\n    });\r\n  });\r\n}\r\n","import Keen from './index';\r\nimport each from '@regang/keen-core/lib/utils/each';\r\nimport { queue } from './utils/queue';\r\n\r\nexport function deferEvent(eventCollection, eventBody){\r\n\r\n  if (arguments.length !== 2 || typeof eventCollection !== 'string') {\r\n    handleValidationError.call(this, 'Incorrect arguments provided to #deferEvent method');\r\n    return;\r\n  }\r\n\r\n  this.queue.events[eventCollection] = this.queue.events[eventCollection] || [];\r\n  this.queue.events[eventCollection].push(eventBody);\r\n  this.queue.capacity++;\r\n  if (!this.queue.timer) {\r\n    this.queue.start();\r\n  }\r\n  this.emit('deferEvent', eventCollection, eventBody);\r\n  return this;\r\n}\r\n\r\nexport function deferEvents(eventsHash){\r\n  var self = this;\r\n\r\n  if (arguments.length !== 1 || typeof eventsHash !== 'object') {\r\n    handleValidationError.call(this, 'Incorrect arguments provided to #deferEvents method');\r\n    return;\r\n  }\r\n\r\n  each(eventsHash, function(eventList, eventCollection){\r\n    self.queue.events[eventCollection] = self.queue.events[eventCollection] || [];\r\n    self.queue.events[eventCollection] = self.queue.events[eventCollection].concat(eventList);\r\n    self.queue.capacity = self.queue.capacity + eventList.length;\r\n    if (!self.queue.timer) {\r\n      self.queue.start();\r\n    }\r\n  });\r\n  self.emit('deferEvents', eventsHash);\r\n  return self;\r\n}\r\n\r\nexport function queueCapacity(num){\r\n  if (!arguments.length) return this.queue.config.capacity;\r\n  this.queue.config.capacity = num ? Number(num): 0;\r\n  this.queue.check();\r\n  return this;\r\n}\r\n\r\nexport function queueInterval(num){\r\n  if (!arguments.length) return this.queue.config.interval;\r\n  this.queue.config.interval = num ? Number(num): 0;\r\n  this.queue.check();\r\n  return this;\r\n}\r\n\r\nexport function recordDeferredEvents(){\r\n  const self = this;\r\n\r\n  if (self.queue.capacity > 0) {\r\n    self.queue.pause();\r\n    let clonedQueueConfig = { ...self.queue.config };\r\n    let clonedQueueEvents = { ...self.queue.events };\r\n    self.queue = queue();\r\n    self.queue.config = clonedQueueConfig;\r\n    self.queue.on('flush', function(){\r\n      self.recordDeferredEvents();\r\n    });\r\n    self.emit('recordDeferredEvents', clonedQueueEvents);\r\n    self.recordEvents(clonedQueueEvents, (err, res) => {\r\n      if (err) {\r\n        self.emit('recordDeferredEventsError', err, clonedQueueEvents);\r\n      }\r\n    });\r\n  }\r\n  return self;\r\n}\r\n\r\nfunction handleValidationError(message){\r\n  this.emit('error', `Event(s) not deferred: ${message}`);\r\n}\r\n","import pkg from '../package.json';\r\n\r\nexport function initAutoTrackingCore(lib) {\r\n  return function(obj) {\r\n    const client = this;\r\n    const helpers = lib.helpers;\r\n    const utils = lib.utils;\r\n\r\n    const options = utils.extend({\r\n      ignoreDisabledFormFields: false,\r\n      ignoreFormFieldTypes: ['password'],\r\n      recordClicks: true,\r\n      recordClicksPositionPointer: false,\r\n      recordFormSubmits: true,\r\n      recordPageViews: true,\r\n      recordPageViewsOnExit: false,\r\n      recordScrollState: true,\r\n      shareUuidAcrossDomains: false,\r\n      collectIpAddress: true,\r\n      collectUuid: true,\r\n      recordElementViews: true,\r\n      catchError: undefined // optional, function(someError) - error handler\r\n    }, obj);\r\n\r\n    if (client.config.requestType === 'beaconAPI' && options.catchError) {\r\n      throw `You cannot use the BeaconAPI and catchError function in the same time, because BeaconAPI ignores errors. For requests with error handling - use requestType: 'fetch'`;\r\n      return;\r\n    }\r\n\r\n    if (\r\n      client.config.requestType === 'jsonp' // jsonp is deprecated, it's the default value from old keen's client\r\n    ) {\r\n      if (options.catchError) {\r\n        client.config.requestType = 'fetch';\r\n      } else {\r\n        client.config.requestType = 'beaconAPI';\r\n      }\r\n    }\r\n\r\n    let now = new Date();\r\n    let allTimeOnSiteS = 0;\r\n    let allTimeOnSiteMS = 0;\r\n    if(typeof document !== 'undefined') {\r\n      let hidden;\r\n      let visibilityChange;\r\n      if (typeof document.hidden !== \"undefined\") {\r\n        hidden = \"hidden\";\r\n        visibilityChange = \"visibilitychange\";\r\n      } else if (typeof document.msHidden !== \"undefined\") {\r\n        hidden = \"msHidden\";\r\n        visibilityChange = \"msvisibilitychange\";\r\n      } else if (typeof document.webkitHidden !== \"undefined\") {\r\n        hidden = \"webkitHidden\";\r\n        visibilityChange = \"webkitvisibilitychange\";\r\n      }\r\n\r\n      const handleVisibilityChange = () => {\r\n        if(document[hidden]) {\r\n          allTimeOnSiteS += getSecondsSinceDate(now);\r\n          allTimeOnSiteMS += getMiliSecondsSinceDate(now);\r\n          return;\r\n        } \r\n        now = new Date();\r\n      }\r\n      if(typeof document.addEventListener !== \"undefined\" ||\r\n         hidden !== undefined){\r\n        document.addEventListener(visibilityChange, handleVisibilityChange, false);\r\n      }\r\n    }\r\n\r\n    const cookie = new utils.cookie('keen');\r\n\r\n    const domainName = helpers.getDomainName(window.location.hostname);\r\n    const cookieDomain = domainName && options.shareUuidAcrossDomains ? {\r\n      domain: '.' + domainName\r\n    } : {};\r\n\r\n    let uuid;\r\n    if (options.collectUuid) {\r\n      uuid = cookie.get('uuid');\r\n      if (!uuid) {\r\n        uuid = helpers.getUniqueId();\r\n        cookie.set('uuid', uuid, cookieDomain);\r\n      }\r\n    }\r\n\r\n    let initialReferrer = cookie.get('initialReferrer');\r\n    if (!initialReferrer){\r\n      initialReferrer = document && document.referrer || undefined;\r\n      cookie.set('initialReferrer', initialReferrer, cookieDomain);\r\n    }\r\n\r\n    let scrollState = {};\r\n    if (options.recordScrollState) {\r\n      scrollState = helpers.getScrollState();\r\n      utils.listener('window').on('scroll', () => {\r\n        scrollState = helpers.getScrollState(scrollState);\r\n      });\r\n    }\r\n\r\n    const addons = [\r\n      {\r\n        name: 'keen:ua_parser',\r\n        input: {\r\n          ua_string: 'user_agent'\r\n        },\r\n        output: 'tech'\r\n      },\r\n      {\r\n        name: 'keen:url_parser',\r\n        input: {\r\n          url: 'url.full'\r\n        },\r\n        output: 'url.info'\r\n      },\r\n      {\r\n        name: 'keen:url_parser',\r\n        input: {\r\n          url: 'referrer.full'\r\n        },\r\n        output: 'referrer.info'\r\n      },\r\n      {\r\n        name: 'keen:date_time_parser',\r\n        input: {\r\n          date_time: 'keen.timestamp'\r\n        },\r\n        output: 'time.utc'\r\n      },\r\n      {\r\n        name: 'keen:date_time_parser',\r\n        input: {\r\n          date_time: 'local_time_full'\r\n        },\r\n        output: 'time.local'\r\n      }\r\n    ];\r\n\r\n    let ip_address = '${keen.ip}';\r\n    addons.push({\r\n      name: 'keen:ip_to_geo',\r\n      input: {\r\n        ip: 'ip_address',\r\n        remove_ip_property: !options.collectIpAddress\r\n      },\r\n      output : 'geo'\r\n    });\r\n\r\n    client.extendEvents(function() {\r\n      const browserProfile = helpers.getBrowserProfile();\r\n      return {\r\n        tracked_by: pkg.name + '-' + pkg.version,\r\n        local_time_full: new Date().toISOString(),\r\n        user: {\r\n          uuid\r\n        },\r\n        page: {\r\n          title: document ? document.title : null,\r\n          description: browserProfile.description,\r\n          scroll_state: scrollState,\r\n          time_on_page: allTimeOnSiteS > 0 ? allTimeOnSiteS : getSecondsSinceDate(now),\r\n          time_on_page_ms: allTimeOnSiteMS > 0 ? allTimeOnSiteMS : getMiliSecondsSinceDate(now)\r\n        },\r\n\r\n        ip_address,\r\n        geo: { /* Enriched */ },\r\n\r\n        user_agent: '${keen.user_agent}',\r\n        tech: {\r\n          profile: browserProfile\r\n          /* Enriched */\r\n        },\r\n\r\n        url: {\r\n          full: window ? window.location.href : '',\r\n          info: { /* Enriched */ }\r\n        },\r\n\r\n        referrer: {\r\n          initial: initialReferrer,\r\n          full: document ? document.referrer : '',\r\n          info: { /* Enriched */ }\r\n        },\r\n\r\n        time: {\r\n          local: { /* Enriched */ },\r\n          utc: { /* Enriched */ }\r\n        },\r\n\r\n        keen: {\r\n          timestamp: new Date().toISOString(),\r\n          addons,\r\n        }\r\n      };\r\n    });\r\n\r\n    if (options.recordClicks === true) {\r\n      utils.listener('a, a *').on('click', function(e) {\r\n        const el = e.target;\r\n        let event = {\r\n          element: helpers.getDomNodeProfile(el),\r\n          local_time_full: new Date().toISOString(),\r\n        };\r\n\r\n        // pointer position tracking\r\n        if(options.recordClicksPositionPointer === true) {\r\n          const pointer = {\r\n            x_position: e.pageX,\r\n            y_position: e.pageY,\r\n          }\r\n          event = {...event, pointer};\r\n        }\r\n\r\n        if (options.catchError) {\r\n          return client\r\n            .recordEvent({\r\n              collection: 'clicks',\r\n              event\r\n            }).catch(err => {\r\n              options.catchError(err);\r\n            });\r\n        }\r\n\r\n        return client\r\n          .recordEvent({\r\n            collection: 'clicks',\r\n            event\r\n          });\r\n      });\r\n    }\r\n\r\n    if (options.recordFormSubmits === true) {\r\n      utils.listener('form').on('submit', function(e) {\r\n        const el = e.target;\r\n        const serializerOptions = {\r\n          disabled: options.ignoreDisabledFormFields,\r\n          ignoreTypes: options.ignoreFormFieldTypes\r\n        };\r\n        const event = {\r\n          form: {\r\n            action: el.action,\r\n            fields: utils.serializeForm(el, serializerOptions),\r\n            method: el.method\r\n          },\r\n          element: helpers.getDomNodeProfile(el),\r\n          local_time_full: new Date().toISOString()\r\n        };\r\n\r\n        if (options.catchError) {\r\n          return client\r\n            .recordEvent({\r\n              collection: 'form_submissions',\r\n              event\r\n            })\r\n            .catch(err => {\r\n              options.catchError(err);\r\n            });\r\n        }\r\n\r\n        return client.recordEvent({\r\n          collection: 'form_submissions',\r\n          event\r\n        });\r\n      });\r\n    }\r\n\r\n    if (options.recordPageViews === true && !options.recordPageViewsOnExit) {\r\n      if (options.catchError) {\r\n        client\r\n          .recordEvent({\r\n            collection: 'pageviews'\r\n          })\r\n          .catch(err => {\r\n            options.catchError(err);\r\n          });\r\n      } else {\r\n        client\r\n          .recordEvent({\r\n            collection: 'pageviews'\r\n          });\r\n      }\r\n    }\r\n\r\n    if (options.recordPageViewsOnExit && typeof window !== 'undefined') {\r\n      window.addEventListener('beforeunload', () => {\r\n        client.config.requestType = 'beaconAPI'; // you can run beforeunload only with beaconAPI\r\n        client.recordEvent({\r\n          collection: 'pageviews'\r\n        });\r\n      });\r\n    }\r\n\r\n    if(options.recordElementViews === true){\r\n      if(typeof IntersectionObserver !== 'undefined'){\r\n        const elementViewsOptions = {\r\n          threshold: 1.0,\r\n        }\r\n        const elementViewsCallback = (events, observer) => {\r\n          events.forEach(el => {\r\n            if(el.isIntersecting){\r\n              const event = {\r\n                element: helpers.getDomNodeProfile(el.target),\r\n                local_time_full: new Date().toISOString()\r\n              }\r\n              if (options.catchError) {\r\n                return client\r\n                  .recordEvent({\r\n                    collection: 'element_views',\r\n                    event\r\n                  }).catch(err => {\r\n                    options.catchError(err);\r\n                  });\r\n              }\r\n\r\n              return client\r\n                .recordEvent({\r\n                  collection: 'element_views',\r\n                  event\r\n                });\r\n            }\r\n          })\r\n        }\r\n        const observer = new IntersectionObserver(elementViewsCallback, elementViewsOptions);\r\n        const target = document.querySelectorAll('.track-element-view');\r\n        target.forEach(el => {\r\n          observer.observe(el);\r\n        });\r\n        client.observers.IntersectionObserver = observer;\r\n      }\r\n    }\r\n\r\n    return client;\r\n  };\r\n}\r\n\r\nfunction getSecondsSinceDate(date) {\r\n  return Math.round(getMiliSecondsSinceDate(date) / 1000);\r\n}\r\n\r\nfunction getMiliSecondsSinceDate(date) {\r\n  return new Date().getTime() - date.getTime();\r\n}\r\n","import { getScreenProfile } from './getScreenProfile';\r\nimport { getWindowProfile } from './getWindowProfile';\r\n\r\nexport function getBrowserProfile() {\r\n  return {\r\n    'cookies'    : ('undefined' !== typeof navigator.cookieEnabled) ? navigator.cookieEnabled : false,\r\n    'codeName'   : navigator.appCodeName,\r\n    'description': getDocumentDescription(),\r\n    'language'   : navigator.language,\r\n    'name'       : navigator.appName,\r\n    'online'     : navigator.onLine,\r\n    'platform'   : navigator.platform,\r\n    'useragent'  : navigator.userAgent,\r\n    'version'    : navigator.appVersion,\r\n    'doNotTrack' : navigator.doNotTrack,\r\n    'screen'     : getScreenProfile(),\r\n    'window'     : getWindowProfile()\r\n  }\r\n}\r\n\r\nfunction getDocumentDescription() {\r\n  var el;\r\n  if (document && typeof document.querySelector === 'function') {\r\n    el = document.querySelector('meta[name=\"description\"]');\r\n  }\r\n  return el ? el.content : '';\r\n}\r\n","export function getDatetimeIndex(input){\r\n  var date = input || new Date();\r\n  return {\r\n    'hour_of_day'  : date.getHours(),\r\n    'day_of_week'  : parseInt( 1 + date.getDay() ),\r\n    'day_of_month' : date.getDate(),\r\n    'month'        : parseInt( 1 + date.getMonth() ),\r\n    'year'         : date.getFullYear()\r\n  };\r\n}\r\n","function extractHostname(url) {\r\n    var hostname;\r\n    //find & remove protocol (http, ftp, etc.) and get hostname\r\n\r\n    if (url.indexOf(\"://\") > -1) {\r\n        hostname = url.split('/')[2];\r\n    }\r\n    else {\r\n        hostname = url.split('/')[0];\r\n    }\r\n\r\n    //find & remove port number\r\n    hostname = hostname.split(':')[0];\r\n    //find & remove \"?\"\r\n    hostname = hostname.split('?')[0];\r\n\r\n    return hostname;\r\n}\r\n\r\n// To address those who want the \"root domain,\" use this function:\r\nexport function getDomainName(url) {\r\n    var domain = extractHostname(url),\r\n        splitArr = domain.split('.'),\r\n        arrLen = splitArr.length;\r\n\r\n    //extracting the root domain here\r\n    //if there is a subdomain\r\n    if (arrLen > 2) {\r\n        domain = splitArr[arrLen - 2] + '.' + splitArr[arrLen - 1];\r\n        //check to see if it's using a Country Code Top Level Domain (ccTLD) (i.e. \".me.uk\")\r\n        if (splitArr[arrLen - 2].length == 2 && splitArr[arrLen - 1].length == 2) {\r\n            //this is using a ccTLD\r\n            domain = splitArr[arrLen - 3] + '.' + domain;\r\n        }\r\n    }\r\n    return domain;\r\n}\r\n","import { getDomNodePath } from './getDomNodePath';\r\n\r\nexport function getDomNodeProfile(el) {\r\n  return {\r\n    action: el.action,\r\n    class: el.className,\r\n    href: getElementProps(el, 'href'),\r\n    id: getElementProps(el, 'id'),\r\n    event_key: getElementProps(el, 'data-event-key'),\r\n    method: el.method,\r\n    name: el.name,\r\n    node_name: el.nodeName,\r\n    selector: getDomNodePath(el),\r\n    text: getElementProps(el, 'text'),\r\n    title: getElementProps(el, 'title'),\r\n    type: el.type,\r\n    x_position: el.offsetLeft || el.clientLeft || null,\r\n    y_position: el.offsetTop || el.clientTop || null\r\n  };\r\n}\r\n\r\nconst getElementProps = (el, prop) => {\r\n  if (el[prop]) {\r\n    return el[prop];\r\n  }\r\n  if (el.hasAttribute && el.hasAttribute(prop)) {\r\n    return el.getAttribute(prop);\r\n  }\r\n  if (el.parentNode) {\r\n    return getElementProps(el.parentNode, prop);\r\n  }\r\n  return null;\r\n};\r\n","import extend from '@regang/keen-core/lib/utils/extend';\r\n\r\nexport function getScrollState(obj){\r\n  var config = typeof obj === 'object' ? obj : {};\r\n  var state = extend({\r\n    pixel: 0,\r\n    pixel_max: 0,\r\n    ratio: null,\r\n    ratio_max: null\r\n  }, config);\r\n\r\n  if (typeof window !== undefined || typeof document !== undefined) {\r\n    state.pixel = getScrollOffset() + getWindowHeight();\r\n    if (state.pixel > state.pixel_max) {\r\n      state.pixel_max = state.pixel;\r\n    }\r\n    state.ratio = parseFloat(Number(state.pixel / getScrollableArea()).toFixed(2));\r\n    state.ratio_max = parseFloat(Number(state.pixel_max / getScrollableArea()).toFixed(2));\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\nfunction getScrollableArea() {\r\n  var body = document.body;\r\n  var html = document.documentElement;\r\n  return Math.max( body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight ) || null;\r\n}\r\n\r\nfunction getScrollOffset() {\r\n  return (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;\r\n}\r\n\r\nfunction getWindowHeight() {\r\n  return window.innerHeight || document.documentElement.clientHeight;\r\n}\r\n","export function getUniqueId() {\r\n  // uuidv4\r\n  if (typeof crypto !== 'undefined' && crypto.getRandomValues) {\r\n    // browser\r\n    return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>\r\n      (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\r\n    )\r\n  } else {\r\n    // node & older browsers\r\n    let str = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\r\n    return str.replace(/[xy]/g, function(c) {\r\n      let r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\r\n      return v.toString(16);\r\n    });\r\n  }\r\n}\r\n","import Cookies from 'js-cookie';\r\nimport extend from '@regang/keen-core/lib/utils/extend';\r\n\r\nexport const cookie = function(str){\r\n  if (!arguments.length) return;\r\n  if (this instanceof cookie === false) {\r\n    return new cookie(str);\r\n  }\r\n\r\n  this.config = {\r\n    key: str,\r\n    options: {\r\n      expires: 365\r\n    }\r\n  };\r\n  this.data = this.get();\r\n  return this;\r\n}\r\n\r\ncookie.prototype.get = function(str){\r\n  var data = {};\r\n\r\n  if (Cookies.get(this.config.key)) {\r\n    data = Cookies.getJSON(this.config.key);\r\n  }\r\n  if (str && typeof data === 'object' && typeof data !== null) {\r\n    return (typeof data[str] !== 'undefined') ? data[str] : null;\r\n  }\r\n  else {\r\n    return data;\r\n  }\r\n};\r\n\r\ncookie.prototype.set = function(str, value, options){\r\n  if (!arguments.length || !this.enabled()) return this;\r\n  if (typeof str === 'string' && arguments.length >= 2) {\r\n    this.data[str] = value ? value : null;\r\n  }\r\n  else if (typeof str === 'object' && arguments.length === 1) {\r\n    extend(this.data, str);\r\n  }\r\n  Cookies.set(\r\n    this.config.key,\r\n    this.data,\r\n    extend(this.config.options, options || {})\r\n  );\r\n  return this;\r\n};\r\n\r\ncookie.prototype.expire = function(daysUntilExpire){\r\n  if (daysUntilExpire) {\r\n    Cookies.set(\r\n      this.config.key,\r\n      this.data,\r\n      extend(this.config.options, { expires: daysUntilExpire })\r\n    );\r\n  } else {\r\n    Cookies.remove(this.config.key);\r\n    this.data = {};\r\n  }\r\n  return this;\r\n};\r\n\r\ncookie.prototype.options = function(obj){\r\n  if (!arguments.length) return this.config.options;\r\n  this.config.options = (typeof obj === 'object') ? obj : {};\r\n  return this;\r\n};\r\n\r\ncookie.prototype.enabled = function(){\r\n  return navigator.cookieEnabled;\r\n};\r\n","/*!\n * JavaScript Cookie v2.1.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n(function (factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t} else if (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\tvar _OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = _OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\treturn (document.cookie = [\n\t\t\t\t\tkey, '=', value,\n\t\t\t\t\tattributes.expires && '; expires=' + attributes.expires.toUTCString(), // use expires attribute, max-age is not supported by IE\n\t\t\t\t\tattributes.path    && '; path=' + attributes.path,\n\t\t\t\t\tattributes.domain  && '; domain=' + attributes.domain,\n\t\t\t\t\tattributes.secure ? '; secure' : ''\n\t\t\t\t].join(''));\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.get = api.set = api;\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","/*\r\n  This is a modified copy of https://github.com/defunctzombie/form-serialize/ v0.7.1\r\n  Includes a new configuration option:\r\n    * ignoreTypes - Array, Default: [], Example: [ 'password' ]\r\n*/\r\n\r\n// types which indicate a submit action and are not successful controls\r\n// these will be ignored\r\nvar k_r_submitter = /^(?:submit|button|image|reset|file)$/i;\r\n\r\n// node names which could be successful controls\r\nvar k_r_success_contrls = /^(?:input|select|textarea|keygen)/i;\r\n\r\n// Matches bracket notation.\r\nvar brackets = /(\\[[^\\[\\]]*\\])/g;\r\n\r\n// serializes form fields\r\n// @param form MUST be an HTMLForm element\r\n// @param options is an optional argument to configure the serialization. Default output\r\n// with no options specified is a url encoded string\r\n//    - hash: [true | false] Configure the output type. If true, the output will\r\n//    be a js object.\r\n//    - serializer: [function] Optional serializer function to override the default one.\r\n//    The function takes 3 arguments (result, key, value) and should return new result\r\n//    hash and url encoded str serializers are provided with this module\r\n//    - disabled: [true | false]. If true serialize disabled fields.\r\n//    - empty: [true | false]. If true serialize empty fields\r\nexport function serializeForm(form, options) {\r\n  if (typeof options != 'object') {\r\n    options = { hash: !!options };\r\n  }\r\n  else if (options.hash === undefined) {\r\n    options.hash = true;\r\n  }\r\n\r\n  var result = (options.hash) ? {} : '';\r\n  var serializer = options.serializer || ((options.hash) ? hash_serializer : str_serialize);\r\n\r\n  var elements = form && form.elements ? form.elements : [];\r\n\r\n  // Object store each radio and set if it's empty or not\r\n  var radio_store = Object.create(null);\r\n\r\n  for (var i=0 ; i<elements.length ; ++i) {\r\n    var element = elements[i];\r\n\r\n    // NEW: Skip ignored field types\r\n    if (options.ignoreTypes && options.ignoreTypes.indexOf(element.type) > -1) {\r\n      continue;\r\n    }\r\n    // ingore disabled fields\r\n    if ((!options.disabled && element.disabled) || !element.name) {\r\n      continue;\r\n    }\r\n    // ignore anyhting that is not considered a success field\r\n    if (!k_r_success_contrls.test(element.nodeName) ||\r\n      k_r_submitter.test(element.type)) {\r\n      continue;\r\n    }\r\n\r\n    var key = element.name;\r\n    var val = element.value;\r\n\r\n    // we can't just use element.value for checkboxes cause some browsers lie to us\r\n    // they say \"on\" for value when the box isn't checked\r\n    if ((element.type === 'checkbox' || element.type === 'radio') && !element.checked) {\r\n      val = undefined;\r\n    }\r\n\r\n    // If we want empty elements\r\n    if (options.empty) {\r\n      if (element.type === 'checkbox' && !element.checked) {\r\n        val = '';\r\n      }\r\n\r\n      // for radio\r\n      if (element.type === 'radio') {\r\n        if (!radio_store[element.name] && !element.checked) {\r\n          radio_store[element.name] = false;\r\n        }\r\n        else if (element.checked) {\r\n          radio_store[element.name] = true;\r\n        }\r\n      }\r\n\r\n      // if options empty is true, continue only if its radio\r\n      if (val == undefined && element.type == 'radio') {\r\n        continue;\r\n      }\r\n    }\r\n    else {\r\n      // value-less fields are ignored unless options.empty is true\r\n      if (!val) {\r\n        continue;\r\n      }\r\n    }\r\n\r\n    // multi select boxes\r\n    if (element.type === 'select-multiple') {\r\n      val = [];\r\n\r\n      var selectOptions = element.options;\r\n      var isSelectedOptions = false;\r\n      for (var j=0 ; j<selectOptions.length ; ++j) {\r\n        var option = selectOptions[j];\r\n        var allowedEmpty = options.empty && !option.value;\r\n        var hasValue = (option.value || allowedEmpty);\r\n        if (option.selected && hasValue) {\r\n          isSelectedOptions = true;\r\n\r\n          // If using a hash serializer be sure to add the\r\n          // correct notation for an array in the multi-select\r\n          // context. Here the name attribute on the select element\r\n          // might be missing the trailing bracket pair. Both names\r\n          // \"foo\" and \"foo[]\" should be arrays.\r\n          if (options.hash && key.slice(key.length - 2) !== '[]') {\r\n            result = serializer(result, key + '[]', option.value);\r\n          }\r\n          else {\r\n            result = serializer(result, key, option.value);\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!isSelectedOptions && options.empty) {\r\n        result = serializer(result, key, '');\r\n      }\r\n      continue;\r\n    }\r\n\r\n    result = serializer(result, key, val);\r\n  }\r\n\r\n  if (options.empty) {\r\n    for (var key in radio_store) {\r\n      if (!radio_store[key]) {\r\n        result = serializer(result, key, '');\r\n      }\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nfunction parse_keys(string) {\r\n  var keys = [];\r\n  var prefix = /^([^\\[\\]]*)/;\r\n  var children = new RegExp(brackets);\r\n  var match = prefix.exec(string);\r\n\r\n  if (match[1]) {\r\n      keys.push(match[1]);\r\n  }\r\n\r\n  while ((match = children.exec(string)) !== null) {\r\n      keys.push(match[1]);\r\n  }\r\n\r\n  return keys;\r\n}\r\n\r\nfunction hash_assign(result, keys, value) {\r\n  if (keys.length === 0) {\r\n    result = value;\r\n    return result;\r\n  }\r\n\r\n  var key = keys.shift();\r\n  var between = key.match(/^\\[(.+?)\\]$/);\r\n\r\n  if (key === '[]') {\r\n    result = result || [];\r\n\r\n    if (Array.isArray(result)) {\r\n      result.push(hash_assign(null, keys, value));\r\n    }\r\n    else {\r\n      // This might be the result of bad name attributes like \"[][foo]\",\r\n      // in this case the original `result` object will already be\r\n      // assigned to an object literal. Rather than coerce the object to\r\n      // an array, or cause an exception the attribute \"_values\" is\r\n      // assigned as an array.\r\n      result._values = result._values || [];\r\n      result._values.push(hash_assign(null, keys, value));\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  // Key is an attribute name and can be assigned directly.\r\n  if (!between) {\r\n    result[key] = hash_assign(result[key], keys, value);\r\n  }\r\n  else {\r\n    var string = between[1];\r\n    // +var converts the variable into a number\r\n    // better than parseInt because it doesn't truncate away trailing\r\n    // letters and actually fails if whole thing is not a number\r\n    var index = +string;\r\n\r\n    // If the characters between the brackets is not a number it is an\r\n    // attribute name and can be assigned directly.\r\n    if (isNaN(index)) {\r\n      result = result || {};\r\n      result[string] = hash_assign(result[string], keys, value);\r\n    }\r\n    else {\r\n      result = result || [];\r\n      result[index] = hash_assign(result[index], keys, value);\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n// Object/hash encoding serializer.\r\nfunction hash_serializer(result, key, value) {\r\n  var matches = key.match(brackets);\r\n\r\n  // Has brackets? Use the recursive assignment function to walk the keys,\r\n  // construct any missing objects in the result tree and make the assignment\r\n  // at the end of the chain.\r\n  if (matches) {\r\n    var keys = parse_keys(key);\r\n    hash_assign(result, keys, value);\r\n  }\r\n  else {\r\n    // Non bracket notation can make assignments directly.\r\n    var existing = result[key];\r\n\r\n    // If the value has been assigned already (for instance when a radio and\r\n    // a checkbox have the same name attribute) convert the previous value\r\n    // into an array before pushing into it.\r\n    //\r\n    // NOTE: If this requirement were removed all hash creation and\r\n    // assignment could go through `hash_assign`.\r\n    if (existing) {\r\n      if (!Array.isArray(existing)) {\r\n        result[key] = [ existing ];\r\n      }\r\n\r\n      result[key].push(value);\r\n    }\r\n    else {\r\n      result[key] = value;\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n// urlform encoding serializer\r\nfunction str_serialize(result, key, value) {\r\n  // encode newlines as \\r\\n cause the html spec says so\r\n  value = value.replace(/(\\r)?\\n/g, '\\r\\n');\r\n  value = encodeURIComponent(value);\r\n\r\n  // spaces should be '+' rather than '%20'.\r\n  value = value.replace(/%20/g, '+');\r\n  return result + (result ? '&' : '') + encodeURIComponent(key) + '=' + value;\r\n}\r\n","export function timer(num){\r\n  if (this instanceof timer === false) {\r\n    return new timer(num);\r\n  }\r\n  this.count = num || 0;\r\n  return this;\r\n}\r\n\r\ntimer.prototype.start = function(){\r\n  var self = this;\r\n  this.pause();\r\n  this.interval = setInterval(function(){\r\n    self.count++;\r\n  }, 1000);\r\n  return this;\r\n};\r\n\r\ntimer.prototype.pause = function(){\r\n  clearInterval(this.interval);\r\n  return this;\r\n};\r\n\r\ntimer.prototype.value = function(){\r\n  return this.count;\r\n};\r\n\r\ntimer.prototype.clear = function(){\r\n  this.count = 0;\r\n  return this;\r\n};\r\n"],"sourceRoot":""}